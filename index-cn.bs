<pre class=metadata>
Title: How to Read the ECMAScript Specification
Status: LD
URL: https://timothygu.me/es-howto/
Shortname: es-howto
Editor: Timothy Gu, timothygu99@gmail.com, https://timothygu.me/
Abstract: å¦‚æœä½ æƒ³å­¦ä¹ JavaScriptå¤æ‚çš„å·¥ä½œåŸç†çš„è¯ï¼Œé‚£ä¹ˆECMAScriptè¯­è¨€è§„èŒƒ(åˆåJavaScriptè§„èŒƒï¼Œæˆ–ECMA-262)æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„èµ„æºæ–‡çŒ®ã€‚ç„¶è€Œï¼Œå½“ä½ åˆšå¼€å§‹çœ‹åˆ°é‚£å·¨é‡çš„æ–‡å­—ç¯‡å¹…æ—¶ï¼Œä½ å¯èƒ½ä¼šæœ›è€Œå´æ­¥ã€‚è€Œæœ¬æ–‡ç¼–å†™çš„ç›®çš„å°±æ˜¯ä¸ºäº†è®©ä½ ä»¥ä¸€ç§æ›´ç®€å•çš„æ–¹å¼å»é˜…è¯»è¿™æœ¬æœ€ä½³çš„JavaScriptè¯­è¨€å‚è€ƒè§„èŒƒã€‚
Indent: 2
Editor Term: Author, Authors
Default Ref Status: current
Markup Shorthands: css no, markdown yes
Repository: TimothyGu/es-howto
Default Highlight: javascript
</pre>

<pre class="link-defaults">
spec: ecma-262; type: dfn; for: /; text: internal method
spec: ecma-262; type: dfn; for: /; text: internal slot
spec: ecma-262; type: interface; for: ECMAScript; text: ArrayBuffer
spec: ecma-262; type: interface; for: ECMAScript; text: Function
spec: ecma-262; type: interface; for: ECMAScript; text: Promise
spec: ecma-262; type: interface; for: ECMAScript; text: Uint8Array
</pre>

<pre class="anchors">
urlPrefix: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/; for: MDN
  type: method
    text: Object.getPrototypeOf(); url: Global_Objects/Object/getPrototypeOf#
    text: String.prototype.substring(); url: Global_Objects/String/substring#
  type: attribute
    text: new.target; url: Operators/new.target#
  type: dfn
    text: abstract equality algorithm; url: Operators/Comparison_Operators#Using_the_Equality_Operators
    text: equality operators; url: Operators/Comparison_Operators#Equality_operators
    text: label; url: Statements/label#

urlPrefix: https://nodejs.org/api/; spec: NODEJS; for: Node.js
  type: dfn
    text: globals; url: globals.html#globals_global_objects
    text: modules; url: modules.html#modules_modules
  type: interface
    text: Buffer; url: buffer.html#buffer_class_buffer
  type: namespace
    for: NodeJSGlobal; urlPrefix: globals.html
      text: process; url: #globals_process
    for: NodeJSModuleScope; urlPrefix: modules.html
      text: module; url: #modules_module
  type: attribute
    for: NodeJSGlobal; urlPrefix: globals.html
      text: global; url: #globals_global
    for: NodeJSModuleScope; urlPrefix: modules.html
      text: exports; url: #modules_exports
      text: __dirname; url: #modules_dirname
      text: __filename; url: #modules_filename
  type: method
    for: NodeJSGlobal; urlPrefix: globals.html
      text: clearImmediate(); url: #globals_clearimmediate_immediateobject
      text: setImmediate(); url: #globals_setimmediate_callback_args
    for: NodeJSModuleScope; urlPrefix: modules.html
      text: require(); url: #modules_require

urlPrefix: https://tc39.es/ecma262/; for: ECMA-262; type: dfn
  text: Â§5 Notational Conventions; url: sec-notational-conventions
  text: Â§5.2 Algorithm Conventions; url: sec-algorithm-conventions
  text: Â§5.2.1 Abstract Operations; url: sec-algorithm-conventions-abstract-operations
  text: Â§5.2.3.4 ReturnIfAbrupt Shorthands; url: sec-returnifabrupt-shorthands
  text: Â§6.1.7.2 Object Internal Methods and Internal Slots; url: sec-object-internal-methods-and-internal-slots
  text: Â§6.2.1 The List and Record Specification Types; url: sec-list-and-record-specification-type
  text: Â§6.2.3 The Completion Record Specification Type; url: sec-completion-record-specification-type
  text: Â§9 Ordinary and Exotic Objects Behaviours; url: sec-ordinary-and-exotic-objects-behaviours
  text: Â§9.1 Ordinary Object Internal Methods and Internal Slots; url: sec-ordinary-object-internal-methods-and-internal-slots
  text: Â§9.1.8 [[Get]] ( P, Receiver ); url: sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver
  text: Â§9.2 ECMAScript Function Objects; url: sec-ecmascript-function-objects
  text: Â§9.3 Built-in Function Objects; url: sec-built-in-function-objects
  text: Â§9.4.2 Array Exotic Objects; url: sec-array-exotic-objects
  text: Â§10 ECMAScript Language: Source Code; url: sec-ecmascript-language-source-code
  text: Â§13.6 The if Statement; url: sec-if-statement
  text: Â§13.7 Iteration Statements; url: sec-iteration-statements
  text: Â§15 ECMAScript Language: Scripts and Modules; url: sec-ecmascript-language-scripts-and-modules
  text: Â§18 The Global Object; url: sec-global-object
  text: Â§21.1.3.22 String.prototype.substring ( start, end ); url: sec-string.prototype.substring
  text: Â§26 Reflection; url: sec-reflection
  text: Â§B.3.7 The [[IsHTMLDDA]] Internal Slot; url: sec-IsHTMLDDA-internal-slot

urlPrefix: https://tc39.es/ecma262/; spec: ECMA-262; for: ECMAScript
  type: interface
    text: Array; url: sec-array-objects
    text: ArrayBuffer; url: sec-arraybuffer-objects
    text: DataView; url: sec-dataview-objects
    text: Function; url: sec-function-objects
    text: Map; url: sec-map-objects
    text: Math; url: sec-math-object
    text: Number; url: sec-number-objects
    text: Object; url: sec-object-objects
    text: Promise; url: sec-promise-objects
    text: Reflect; url: sec-reflect-object
    text: RegExp; url: sec-regexp-regular-expression-objects
    text: Proxy; url: sec-proxy-objects
    text: Set; url: sec-set-objects
    text: SharedArrayBuffer; url: sec-sharedarraybuffer-objects
    text: Uint8Array; url: sec-typedarray-objects
    text: %ArrayPrototype%; url: sec-properties-of-the-array-prototype-object
    text: %ErrorPrototype%; url: sec-properties-of-the-error-prototype-object
    text: %FunctionPrototype%; url: sec-properties-of-the-function-prototype-object
    text: %IteratorPrototype%; url: sec-%iteratorprototype%-object
    text: %MapPrototype%; url: sec-properties-of-the-map-prototype-object
    text: %ObjectPrototype%; url: sec-properties-of-the-object-prototype-object
    text: %Promise%; url: sec-promise-constructor
    text: %SetPrototype%; url: sec-properties-of-the-set-prototype-object
    text: %StringPrototype%; url: sec-properties-of-the-string-prototype-object
  type: attribute
    text: globalThis; url: sec-globalthis
  type: exception
    text: Error; url: sec-error-objects
    text: SyntaxError; url: sec-native-error-types-used-in-this-standard-syntaxerror
    text: TypeError; url: sec-native-error-types-used-in-this-standard-typeerror
  type: method
    text: Array.isArray(); url: sec-array.isarray
    text: Boolean(); url: sec-boolean-constructor-boolean-value
    text: JSON.stringify(); url: sec-json.stringify
    text: Math.trunc(); url: sec-math.trunc
    text: Object(); url: sec-object-value
    text: Object.getOwnPropertySymbols(); url: sec-object.getownpropertysymbols
    text: Object.prototype.hasOwnProperty(); url: sec-object.prototype.hasownproperty
    text: String(); url: sec-string-constructor-string-value
    text: String.prototype.substring(); url: sec-string.prototype.substring
    text: %ArrayProto_entries%; url: sec-array.prototype.entries
    text: %ArrayProto_forEach%; url: sec-array.prototype.foreach
    text: %ArrayProto_keys%; url: sec-array.prototype.keys
    text: %ArrayProto_values%; url: sec-array.prototype.values
    text: %ObjProto_toString%; url: sec-object.prototype.tostring
    text: %Promise_reject%; url: sec-promise.reject
    text: %Promise_resolve%; url: sec-promise.resolve
  type: const
    url: sec-well-known-symbols
      text: @@iterator
      text: @@toStringTag
      text: @@unscopables
  type: argument
    text: NewTarget; url: sec-built-in-function-objects
  type: abstract-op
    text: ArrayCreate; url: sec-arraycreate
    text: Call; url: sec-call
    text: CanonicalNumericIndexString; url: sec-canonicalnumericindexstring
    text: Completion; url: sec-completion
    text: Construct; url: sec-construct
    text: CreateArrayIterator; url: sec-createarrayiterator
    text: CreateBuiltinFunction; url: sec-createbuiltinfunction
    text: CreateDataProperty; url: sec-createdataproperty
    text: CreateIterResultObject; url: sec-createiterresultobject
    text: CreateMapIterator; url: sec-createmapiterator
    text: CreateSetIterator; url: sec-createsetiterator
    text: DefinePropertyOrThrow; url: sec-definepropertyorthrow
    text: DeletePropertyOrThrow; url: sec-deletepropertyorthrow
    text: DetachArrayBuffer; url: sec-detacharraybuffer
    text: Get; url: sec-get-o-p
    text: GetIterator; url: sec-getiterator
    text: GetMethod; url: sec-getmethod
    text: GetPrototypeFromConstructor; url: sec-getprototypefromconstructor
    text: GetV; url: sec-getv
    text: HasOwnProperty; url: sec-hasownproperty
    text: HasProperty; url: sec-hasproperty
    text: Invoke; url: sec-invoke
    text: IsAccessorDescriptor; url: sec-isaccessordescriptor
    text: IsArray; url: sec-isarray
    text: IsCallable; url: sec-iscallable
    text: IsConstructor; url: sec-isconstructor
    text: IsDataDescriptor; url: sec-isdatadescriptor
    text: IsDetachedBuffer; url: sec-isdetachedbuffer
    text: IsSharedArrayBuffer; url: sec-issharedarraybuffer
    text: IteratorStep; url: sec-iteratorstep
    text: IteratorValue; url: sec-iteratorvalue
    text: NormalCompletion; url: sec-normalcompletion
    text: NumberToString; url: sec-numbertostring
    text: ObjectCreate; url: sec-objectcreate
    text: OrdinaryCreateFromConstructor; url: sec-ordinarycreatefromconstructor
    text: OrdinaryDefineOwnProperty; url: sec-ordinarydefineownproperty
    text: OrdinaryGet; url: sec-ordinaryget
    text: OrdinaryGetOwnProperty; url: sec-ordinarygetownproperty
    text: OrdinaryGetPrototypeOf; url: sec-ordinarygetprototypeof
    text: OrdinaryPreventExtensions; url: sec-ordinarypreventextensions
    text: OrdinarySetWithOwnDescriptor; url: sec-ordinarysetwithowndescriptor
    text: OrdinaryToPrimitive; url: sec-ordinarytoprimitive
    text: RequireObjectCoercible; url: sec-requireobjectcoercible
    text: ReturnIfAbrupt; url: sec-returnifabrupt
    text: Set; url: sec-set-o-p-v-throw
    text: SetFunctionName; url: sec-setfunctionname
    text: SetImmutablePrototype; url: sec-set-immutable-prototype
    text: SetIntegrityLevel; url: sec-setintegritylevel
    text: StringCreate; url: sec-stringcreate
    text: SymbolDescriptiveString; url: sec-symboldescriptivestring
    text: ToBoolean; url: sec-toboolean
    text: ToInt8; url: sec-toint8
    text: ToInt16; url: sec-toint16
    text: ToInt32; url: sec-toint32
    text: ToInteger; url: sec-tointeger
    text: ToNumber; url: sec-tonumber
    text: ToObject; url: sec-toobject
    text: ToPrimitive; url: sec-toprimitive
    text: ToString; url: sec-tostring
    text: ToUint8; url: sec-touint8
    text: ToUint8Clamp; url: sec-touint8clamp
    text: ToUint16; url: sec-touint16
    text: ToUint32; url: sec-touint32
    text: Type; url: sec-ecmascript-data-types-and-values
    text: abs; url: eqn-abs
    text: floor; url: eqn-floor
    text: max; url: eqn-max
    text: min; url: eqn-min
    for: ECMAScript/Proxy
      text: [[GetPrototypeOf]]; url: sec-proxy-object-internal-methods-and-internal-slots-getprototypeof
  type: dfn
    text: NumericLiteral; url: sec-literals-numeric-literals
    text: modulo; url: eqn-modulo
    url: sec-returnifabrupt-shorthands
      text: !
      text: ?
    text: abrupt completion; url: sec-completion-record-specification-type
    text: array index; url: array-index
    text: array iterator object; url: sec-array-iterator-objects
    text: built-in function object; url: sec-built-in-function-objects
    text: callable; url: sec-iscallable
    text: Completion Record; url: sec-completion-record-specification-type
    text: constructor; url: constructor
    text: conventions; url: sec-algorithm-conventions
    text: current Realm Record; url: current-realm
    text: current realm; url: current-realm
    text: element; url: sec-ecmascript-language-types-string-type
    text: enumerable; url: sec-property-attributes
    text: equally close values; url: sec-ecmascript-language-types-number-type
    text: error objects; url: sec-error-objects
    text: function object; url: function-object
    text: immutable prototype exotic object; url: sec-immutable-prototype-exotic-objects
    url: sec-object-internal-methods-and-internal-slots
      text: internal method
      text: internal slot
    text: modulo; url: eqn-modulo
    text: Number type; url: sec-ecmascript-language-types-number-type
    for: ordinary object; url: sec-ordinary-object-internal-methods-and-internal-slots
      text: internal method
      text: internal slot
    text: own property; url: sec-own-property
    text: Property Descriptor; url: sec-property-descriptor-specification-type
    text: realm; url: realm
    text: type; url: sec-ecmascript-data-types-and-values
</pre>

<pre class=biblio>
{
  "ECMA-262-2019": {
    "href": "https://ecma-international.org/ecma-262/10.0/",
    "title": "ECMAScript 2019 Language Specification",
    "publisher": "Ecma International",
    "rawDate": "June 2019"
  },
  "ISO-22275-2018": {
    "href": "https://www.iso.org/standard/73002.html",
    "title": "ISO/IEC 22275:2018 - Information technology â€” Programming languages, their environments, and system software interfaces â€” ECMAScriptÂ® Specification Suite",
    "publisher": "ISO/IEC",
    "rawDate": "May 2018"
  },
  "JOHNNY-FIVE": {
    "href": "http://johnny-five.io/",
    "title": "Johnny-Five: The JavaScript Robotics & IoT Platform",
    "publisher": "Bocoup LLC"
  },
  "MDN": {
    "href": "https://developer.mozilla.org/en-US/",
    "title": "Mozilla Developer Network",
    "publisher": "Mozilla Inc."
  },
  "NODEJS": {
    "href": "https://nodejs.org/",
    "title": "Node.js",
    "publisher": "Node.js Foundation"
  },
  "TC39": {
    "href": "https://www.ecma-international.org/memento/tc39.htm",
    "title": "TC39 - ECMAScript",
    "publisher": "Ecma International"
  },
  "WAT": {
    "authors": [
      "Gary Bernhardt"
    ],
    "href": "https://www.destroyallsoftware.com/talks/wat",
    "title": "Wat",
    "rawDate": "2012"
  },
  "WHATISMYBROWSER": {
    "href": "https://www.whatsmybrowser.org/",
    "title": "What browser am I using?"
  },
  "XKCD-703": {
    "authors": [
      "Randall Munroe"
    ],
    "href": "https://www.xkcd.com/703/",
    "title": "xkcd: Honor Societies"
  },
  "YDKJS": {
    "authors": [
      "Kyle Simpson"
    ],
    "href": "https://github.com/getify/You-Dont-Know-JS",
    "title": "You Don't Know JS (book series)"
  }
}
</pre>

<div class=non-normative>

# åº # {#prelude}

ECMAScriptè§„èŒƒæ¯å¤©é˜…è¯»ä¸€ç‚¹ç‚¹ï¼Œå¥åº·å¿«ä¹å¤šä¸€ç‚¹ï¼é˜…è¯»è§„èŒƒä¹Ÿè®¸è¿™æ˜¯ä½ çš„æ–°å¹´æ„¿æœ›ï¼Œäº¦æˆ–æ˜¯æŸä¸ªåŒ»ç”Ÿå¼€çš„å¤„æ–¹ï¼ˆå¼€ä¸ªç©ç¬‘ğŸ˜‚ï¼‰ã€‚æ€»ä¹‹ï¼Œä¸ç®¡å‡ºäºä»€ä¹ˆåŸå› ï¼Œæ¬¢è¿æ¬¢è¿!

Note: åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨æœ¯è¯­â€œECMAScriptâ€æ¥æŒ‡ä»£è§„èŒƒæœ¬èº«ï¼Œè€Œåœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨â€œJavaScriptâ€ã€‚ç„¶è€Œï¼Œæ€»ä½“ä¸Šè¿™ä¸¤ä¸ªæœ¯è¯­æŒ‡çš„æ˜¯åŒä¸€ä»¶äº‹ã€‚(ECMAScriptå’ŒJavaScriptä¹‹é—´æœ‰ä¸€äº›å†å²ä¸Šçš„åŒºåˆ«ï¼Œä½†è¿™è¶…å‡ºäº†æœ¬æ–‡çš„è®¨è®ºèŒƒå›´ï¼Œä½ å¯ä»¥ <a href="https://www.google.com/search?q=ecmascript+vs.+javascript">googleä¸€ä¸‹è½»æ¾äº†è§£è¿™äº›åŒºåˆ«</a> ã€‚

## ä¸ºä»€ä¹ˆéœ€è¦é˜…è¯»ECMAScriptè§„èŒƒ ## {#why-should-i-read-the-ecmascript-specification}

ECMAScriptè§„èŒƒæ˜¯æ‰€æœ‰JavaScriptå®ç°çš„æƒå¨å‚è€ƒèµ„æ–™ã€‚æ— è®ºJavaScriptæ˜¯è¿è¡Œåœ¨ä½ çš„æµè§ˆå™¨ [[WHATISMYBROWSER]], è¿˜æ˜¯åœ¨ä½ çš„Node.jsæœåŠ¡å™¨ä¸Š [[NODEJS]], äº¦æˆ–æ˜¯åœ¨ä½ çš„ç‰©è”ç½‘è®¾å¤‡ä¸Š [[JOHNNY-FIVE]]. éƒ½è¦éµå¾ªECMAScriptè§„èŒƒã€‚æ‰€æœ‰JavaScriptå¼•æ“çš„å¼€å‘äººå‘˜ä¹Ÿéƒ½ä¾èµ–äºè¯¥è§„èŒƒè¿›è¡Œå¼€å‘ï¼Œä»¥ç¡®ä¿ä»–ä»¬çš„æ–°ç‰¹æ€§èƒ½å¤Ÿåƒå…¶ä»–JavaScriptå¼•æ“ä¸€æ ·æŒ‰ç…§é¢„æœŸçš„æ–¹å¼å·¥ä½œã€‚

ä½†æˆ‘è®¤ä¸ºè¯¥è§„èŒƒä¸ä»…ä»…å¯¹â€œJavaScriptå¼•æ“å¼€å‘äººå‘˜â€è¿™ç§å¤§ç¥æœ‰ç”¨ï¼Œå®é™…ä¸Šå®ƒå¯¹æ™®é€šçš„JavaScriptç¨‹åºå‘˜åŒæ ·éå¸¸æœ‰ç”¨ï¼Œåªæ˜¯ä½ è¿˜æ²¡æœ‰æ„è¯†åˆ°è€Œå·²ã€‚

å‡è®¾æœ‰ä¸€å¤©ä½ åœ¨å·¥ä½œä¸­å‘ç°äº†ä¸‹åˆ—å¥‡æ€ªçš„ç°è±¡

```js
> Array.prototype.push(42)
1
> Array.prototype
[ 42 ]
> Array.isArray(Array.prototype)
true
> Set.prototype.add(42)
TypeError: Method Set.prototype.add called on incompatible receiver #<Set>
    at Set.add (<anonymous>)
> Set.prototype
Set {}
```

ä¸€ä¸ªæ–¹æ³•èƒ½åœ¨å®ƒçš„åŸå‹ä¸Šå·¥ä½œï¼Œè€Œå¦ä¸€ä¸ªæ–¹æ³•å´ä¸èƒ½åœ¨å®ƒçš„åŸå‹ä¸Šå·¥ä½œï¼Œä¸ºä»€ä¹ˆï¼Ÿä½ æ˜¯ä¸æ˜¯éå¸¸å›°æƒ‘ï¼Ÿè€Œæ›´ä¸å¹¸çš„æ˜¯ï¼Œ<a href="https://www.google.com/search?q=array+prototype+push+on+prototype">googleåœ¨ä½ æœ€éœ€è¦å®ƒçš„æ—¶å€™ä¹Ÿæ— æ³•å¸®åŠ©ä½ </a>, åŒæ · <a href="https://stackoverflow.com/search?q=array+prototype+push+on+prototype">æ— æ‰€ä¸èƒ½çš„Stack Overflowä¹Ÿä¼šå¯¹æ­¤æŸæ‰‹æ— ç­–</a>ã€‚

ä½†é˜…è¯»ECMAScriptè§„èŒƒä¼šå¸®åŠ©åˆ°ä½ å“¦ï¼

æˆ–è€…ï¼Œä½ å¯èƒ½æƒ³çŸ¥é“â€˜è‡­åæ˜­è‘—â€™çš„ [=MDN/equality operators|loose equality operator=] (`==`) æ˜¯å¦‚ä½•çœŸæ­£functionçš„ (â€œfunctionâ€è¿™ä¸ªè¯æˆ‘ä¹Ÿæ˜¯looselyä½¿ç”¨ [[WAT]])ã€‚è€Œå½“æ›¾ç»é‚£ä¸ªå‹¤å¥‹çš„ä½ åœ¨MDNä¸Šæ‰¾åˆ°å®ƒæ—¶ï¼Œåªä¼šå‘ç°å®ƒçš„ [=MDN/abstract equality algorithm|è§£é‡Šæ®µè½=] ä¼¤çœ¼è€Œåˆæ— åŠ© [[MDN]].

ä½†é˜…è¯»ECMAScriptè§„èŒƒä¼šå¸®åŠ©åˆ°ä½ ï¼

å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä¸å»ºè®®åˆšæ¥è§¦JavaScriptçš„å¼€å‘äººå‘˜é˜…è¯»ECMAScriptè§„èŒƒã€‚å¦‚æœä½ æ˜¯JavaScriptæ–°æ‰‹ï¼Œé‚£å°±å…ˆç©ç©Webå§!å…ˆæ„å»ºä¸€äº›webåº”ç”¨ç¨‹åºï¼Œæˆ–è€…ä¸€äº›åŸºäºjavascriptçš„ä¿å§†æ‘„åƒå¤´!æˆ–ä»»ä½•JavaScriptä¸œè¥¿!å½“ä½ è¶Ÿè¿‡äº†è¶³å¤Ÿå¤šçš„JavaScriptçš„å‘æˆ–è€…å˜å¾—ç»éªŒä¸°å¯Œè€Œä¸å¿…æ‹…å¿ƒJavaScriptæ—¶ï¼Œåœ¨è€ƒè™‘å›åˆ°æœ¬æ–‡æ¡£ã€‚

OKï¼Œç°åœ¨ä½ çŸ¥é“äº†ï¼Œè§„èŒƒæ˜¯éå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œè€Œä¸”å¯ä»¥å¸®åŠ©ä½ ç†è§£è¯­è¨€æˆ–å¹³å°çš„å¤æ‚æ€§ã€‚é‚£ä¹ˆECMAScriptè§„èŒƒçš„èŒƒå›´ç©¶ç«ŸåŒ…æ‹¬å“ªäº›å†…å®¹å‘¢?

## å“ªäº›å±äºECMAScriptè§„èŒƒï¼Œå“ªäº›ä¸å±äº ## {#what-belongs-to-the-ecmascript-specification}

è§„èŒƒä¸Šå¯¹è¿™ä¸ªé—®é¢˜çš„å›ç­”æ˜¯â€œåªæœ‰è¯­è¨€ç‰¹æ€§æ‰å±äºäº†ECMAScriptè§„èŒƒâ€ã€‚è¯´äº†åˆå¥½åƒæ²¡è¯´ï¼Œå› ä¸ºè¿™å°±åƒæ˜¯åœ¨è¯´â€œJavaScriptç‰¹æ€§å°±æ˜¯JavaScriptâ€ã€‚æˆ‘ä¸å–œæ¬¢è¿™ç§é‡å¤åˆæ— èŠçš„è¯´æ³• [[XKCD-703]].

ç›¸åï¼Œæˆ‘è¦åšçš„æ˜¯åˆ—å‡ºä¸€äº›åœ¨JavaScriptåº”ç”¨ä¸­å¸¸è§çš„ä¸œè¥¿ï¼Œå¹¶å‘Šè¯‰ä½ å®ƒä»¬æ˜¯å¦æ˜¯ä¸€ç§è¯­è¨€ç‰¹æ€§ã€‚ 

<table class=data>
  <tr>
    <td>è¯­æ³•å…ƒç´ çš„è¯­æ³• (i.e., what a valid <code>for</code>..<code>in</code> loop looks like)
    <td>âœ”
  </tr>
  <tr>
    <td>è¯­æ³•å…ƒç´ çš„è¯­ä¹‰( (i.e., what <code>typeof null</code>, or <code>{ a: b }</code> returns)
    <td>âœ”
  </tr>
  <tr>
    <td><code>import a from 'a';</code>
    <td>â“<sup>[1]</sup>
  </tr>
  <tr>
    <td>{{Object}}, {{Array}}, {{Function}}, {{Number}}, {{Math}}, {{RegExp}}, {{Proxy}}, {{Map}}, {{Promise}}, {{ArrayBuffer}}, {{Uint8Array}}, {{globalThis}}, ...
    <td>âœ”
  </tr>
  <tr>
    <td><code class=idl>console</code>, <code class=idl>setTimeout()</code>, <code class=idl>setInterval()</code>, <code class=idl>clearTimeout()</code>, <code class=idl>clearInterval()</code>
    <td>âœ˜<sup>[2]</sup>
  </tr>
  <tr>
    <td>{{Buffer}}, {{process}}, {{global}}*
    <td>âœ˜<sup>[3]</sup>
  </tr>
  <tr>
    <td>{{module}}, {{exports}}, {{require()}}, {{__dirname}}, {{__filename}}
    <td>âœ˜<sup>[4]</sup>
  </tr>
  <tr>
    <td>{{Window/window}}, {{alert()}}, {{confirm()}}, the DOM ({{Window/document}}, {{HTMLElement}}, {{EventTarget/addEventListener()}}, {{Worker}}, ...)
    <td>âœ˜<sup>[5]</sup>
  </tr>
</table>

<div class=note>
<sup>[1]</sup> ECMAScriptè§„èŒƒæŒ‡å®šäº†è¿™äº›å£°æ˜çš„è¯­æ³•ä»¥åŠå®ƒä»¬çš„å«ä¹‰ï¼Œä½†æ²¡æœ‰æŒ‡å®šæ¨¡å—åº”è¯¥å¦‚ä½•åŠ è½½ã€‚

<sup>[2]</sup>  è¿™äº›ä¸œè¥¿åœ¨æµè§ˆå™¨å’ŒNode.jsä¸­éƒ½å¯ç”¨ï¼Œä½†éƒ½æ˜¯éæ ‡å‡†çš„ã€‚å¯¹äºNode.jsï¼Œå®ƒä»¬æ˜¯ç”±[=Node.js/globals|è¿™ä»½æ–‡æ¡£=]åˆ¶å®šã€‚ å¯¹äºæµè§ˆå™¨ï¼Œ {{/console}} ç”±Consoleæ ‡å‡† [[CONSOLE]]åˆ¶å®šï¼Œè€Œå…¶ä½™çš„ç”±HTMLæ ‡å‡† [[HTML]]åˆ¶å®šã€‚

<sup>[3]</sup> è¿™äº›éƒ½æ˜¯ä»…é™äºNode.jsçš„å…¨å±€å˜é‡ï¼Œç”±[=Node.js/globals|è¿™ä»½æ–‡æ¡£=]åˆ¶å®šã€‚ \* *è¯·æ³¨æ„ï¼Œä¸<code class=idl>global</code>ä¸åŒçš„æ˜¯, {{globalThis}} æ˜¯ECMAScriptçš„ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”æµè§ˆå™¨ä¸­ä¹Ÿå®ç°äº†ã€‚

<sup>[4]</sup> è¿™äº›æ˜¯ä»…é™äºNode.jsæ¨¡å—èŒƒå›´çš„â€œglobalsâ€ï¼Œç”±[=Node.js/modules|è¿™ä»½æ–‡æ¡£=]åˆ¶å®šã€‚

<sup>[5]</sup> è¿™äº›éƒ½æ˜¯ä»…é’ˆå¯¹æµè§ˆå™¨çš„å†…å®¹ã€‚
</div>

## åœ¨è¿›ä¸€æ­¥è®¨è®ºä¹‹å‰ï¼ŒECMAScriptè§„èŒƒåœ¨å“ªé‡Œ?  ## {#where-is-the-ecmascript-specification}

å½“ä½  <a href="https://www.google.com/search?q=ecmascript+specification">googleâ€œECMAScriptè§„èŒƒâ€</a> æ—¶ï¼Œä½ ä¼šæœç´¢åˆ°éå¸¸å¤šçš„ç»“æœï¼Œå®ƒä»¬çœ‹èµ·æ¥éƒ½æ˜¯æ­£è§„åˆæ³•çš„è§„èŒƒã€‚é‚£ä½ åº”è¯¥é€‰æ‹©å“ªä¸€ä¸ªå‘¢?  

**Tl;dr, åœ¨ tc39.es/ecma262/ å‘å¸ƒçš„è§„èŒƒå¤šåŠå°±æ˜¯ä½ æƒ³è¦çš„ ** [[ECMA-262]].

è¯¦ç»†ç‚¹çš„è¯´æ³•:

ECMAScriptè¯­è¨€è§„èŒƒæ˜¯ç”±ä¸€ç¾¤æ¥è‡ªä¸åŒèƒŒæ™¯çš„äººå¼€å‘çš„ï¼Œä»–ä»¬è¢«ç§°ä¸º Ecma International Technical Committee 39(æˆ–è€…æ›´ç†Ÿæ‚‰çš„è¯´æ³•æ˜¯TC39 [[TC39]])ã€‚TC39ç»´æŠ¤äº†ECMAScriptè¯­è¨€çš„æœ€æ–°è§„èŒƒTC39.es [[ECMA-262]].

å¤æ‚åŒ–çš„æ˜¯ï¼Œæ¯å¹´TC39éƒ½ä¼šé€‰æ‹©ä¸€ä¸ªæ—¶é—´ç‚¹æ¥è·å–è¯¥è§„èŒƒçš„å¿«ç…§ï¼Œå¹¶é™„ä¸Šä¸€ä¸ªç‰ˆæœ¬å·ï¼Œä¹Ÿå°±æˆä¸ºäº†å½“å¹´çš„ECMAScriptè¯­è¨€æ ‡å‡†ã€‚ä¾‹å¦‚ï¼Œ the <cite>ECMAScriptÂ® 2019 Language Specification (ECMA-262, 10<sup>th</sup> edition)</cite> [[ECMA-262-2019]] (é€šå¸¸è¢«ç§°ä¸º ES10 æˆ– ES2019 ) æ˜¯2019å¹´6æœˆ tc39.es [[ECMA-262]] ä¸Šçš„è§„èŒƒ.è¯¥è§„èŒƒè¢«æ”¾å…¥ç”²é†›ä¸­ï¼Œå†ç»è¿‡é€‚å½“çš„å‹ç¼©åŒ…è£…å¤„ç†ï¼Œç”¨äºæ°¸ä¹…å­˜æ¡£ã€‚

å› æ­¤ï¼Œé™¤éä½ æƒ³è®©ä½ çš„webåº”ç”¨ç¨‹åºåªè¿è¡Œåœ¨2019å¹´6æœˆçš„æµè§ˆå™¨ä¸Šï¼Œå¦åˆ™ä½ æ€»æ˜¯å¸Œæœ›æŸ¥çœ‹æœ€æ–°çš„è§„èŒƒ tc39.es [[ECMA-262]]ã€‚ä½†å¦‚æœä½ æƒ³(æˆ–å¿…é¡»)æ”¯æŒæ—§çš„æµè§ˆå™¨æˆ–Node.jsç‰ˆæœ¬ï¼Œé‚£ä¹ˆå‚è€ƒæ—§çš„è§„èŒƒå¯èƒ½ä¼šæœ‰å¸®åŠ©ã€‚  

Note: ISO/IECè¿˜å°†ECMAScriptè¯­è¨€æ ‡å‡†é‡æ–°å‘å¸ƒä¸ºISO/IEC 22275 [[ISO-22275-2018]]ã€‚ä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œå› ä¸ºè¯¥æ ‡å‡†åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªåˆ° [[ECMA-262]]çš„è¶…é“¾æ¥ã€‚  

## è§„èŒƒå¯¼èˆª ## {#navigating-the-spec}

ECMAScriptè§„èŒƒè°ˆè®ºäº†**éå¸¸å¤š**çš„ä¸œè¥¿ã€‚å³ä½¿å®ƒçš„ä½œè€…å°½åŠ›æŠŠå®ƒåˆ†æˆæœ‰é€»è¾‘çš„å—ï¼Œä½†ä»ç„¶è¿˜æœ‰å·¨å¤§çš„æ–‡æœ¬é˜…è¯»é‡ã€‚

æˆ‘ä¸ªäººè€Œè¨€ï¼Œå–œæ¬¢å°†è§„èŒƒåˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†:  

- çº¦å®šå’ŒåŸºç¡€ (â€œä»€ä¹ˆæ˜¯Number?å½“è§„èŒƒè¯´'throw a **TypeError** exception'æ—¶ï¼Œå®ƒæ˜¯ä»€ä¹ˆæ„æ€?â€)
- è¯¥è¯­è¨€çš„è¯­æ³•äº§ç‰©(â€œå¦‚ä½•ç¼–å†™for-inå¾ªç¯?â€)
- è¯­è¨€çš„é™æ€è¯­ä¹‰(â€œå¦‚ä½•åœ¨varè¯­å¥ä¸­ç¡®å®šå˜é‡å?â€)
- è¯­è¨€çš„è¿è¡Œæ—¶è¯­ä¹‰(â€œfor-inå¾ªç¯æ˜¯å¦‚ä½•æ‰§è¡Œçš„?â€)
- APIs ("what does <code class=idl>String.prototype.substring()</code> do?")

ä½†æ˜¯è§„èŒƒå¹¶ä¸æ˜¯è¿™æ ·ç»„ç»‡çš„ã€‚ç›¸åï¼Œç¬¬ä¸€ä¸ªè¦ç‚¹å®ƒåœ¨ [=Â§5 Notational Conventions=] è‡³ [=Â§9 Ordinary and Exotic Objects Behaviours=]ç« , æ¥ç€çš„ä¸‰ä¸ªè¦ç‚¹æ˜¯åœ¨ [=Â§10 ECMAScript Language: Source Code=] è‡³ [=Â§15 ECMAScript Language: Scripts and Modules=]ç« , æ¯”å¦‚

> - <a>Â§13.6 The <code>if</code> Statement</a> **Grammar productions**
>   - Â§13.6.1-6 **Static semantics**
>   - Â§13.6.7 **Runtime sematics**
> - [=Â§13.7 Iteration Statements=] **Grammar productions**
>   - Â§13.7.1 Shared **static** and **runtime semantics**
>   - Â§13.7.2 The `do`-`while` Statement
>     - Â§13.7.2.1-5 **Static semantics**
>     - Â§13.7.2.6 **Runtime semantics**
>   - Â§13.7.3 The `while` Statement
>     - ...

è€ŒAPIåˆ™é€šè¿‡ [=Â§18 The Global Object=] through [=Â§26 Reflection=].

æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œç»å¯¹æ²¡æœ‰äººä¼šä»å¤´åˆ°å°¾åœ°é˜…è¯»è§„èŒƒã€‚ç›¸åï¼Œæˆ‘ä»¬åªéœ€è¦æŸ¥çœ‹ä¸æˆ‘ä»¬è¯•å›¾å¯»æ‰¾çš„å†…å®¹ç›¸å¯¹åº”çš„éƒ¨åˆ†ï¼Œå¹¶åœ¨è¯¥éƒ¨åˆ†ä¸­æŸ¥çœ‹æˆ‘ä»¬éœ€è¦çš„å†…å®¹ã€‚è¯•ç€ç¡®å®šä½ çš„é—®é¢˜ä¸äº”å¤§éƒ¨åˆ†ä¸­çš„å“ªä¸€ä¸ªç›¸å…³;å¦‚æœä½ æ— æ³•ç¡®å®šæ˜¯å“ªä¸€ä¸ªï¼Œé—®ä½ è‡ªå·±è¿™ä¸ªé—®é¢˜â€œè¿™æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¿ç®—çš„(æ— è®ºä½ æƒ³ç¡®å®šä»€ä¹ˆ)?â€è¿™æ ·å¯èƒ½ä¼šæ›´æœ‰å¸®åŠ©ã€‚ä¸è¦å¤ªæ‹…å¿ƒï¼Œé€šè¿‡ç»ƒä¹ ï¼Œä½¿ç”¨è§„èŒƒä¼šå˜å¾—æ›´å®¹æ˜“ã€‚

# è¿è¡Œæ—¶è¯­ä¹‰  # {#runtime-semantics}

è¯­è¨€è¿è¡Œæ—¶è¯­ä¹‰å’ŒAPIsæ˜¯è§„èŒƒä¸­æœ€å¤§çš„éƒ¨åˆ†ï¼Œé€šå¸¸ä¹Ÿæ˜¯æˆ‘ä»¬æœ€å…³å¿ƒçš„éƒ¨åˆ†ã€‚  

æ€»çš„æ¥è¯´ï¼Œé˜…è¯»è¿™äº›éƒ¨åˆ†æ˜¯éå¸¸ç®€å•çš„ã€‚ä½†æ˜¯ï¼Œè¯¥è§„èŒƒä½¿ç”¨äº†è®¸å¤šçš„ç®€å†™å¯¹åˆšå¼€å§‹ä½¿ç”¨çš„äººæ¥è¯´æ˜¯éå¸¸æ£˜æ‰‹çš„(è‡³å°‘å¯¹æˆ‘æ¥è¯´)ã€‚ä¸‹é¢æˆ‘å°†å°è¯•è§£é‡Šå…¶ä¸­çš„ä¸€äº›çº¦å®šï¼Œç„¶åå°†å®ƒä»¬åº”ç”¨åˆ°ä¸€ä¸ªå¸¸è§„çš„å·¥ä½œæµä¸­ï¼Œæ¥å¼„æ¸…æ¥šè¿™äº›æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚  

## Algorithm steps ## {#algorithm-steps}

ECMAScriptä¸­çš„å¤§å¤šæ•°è¿è¡Œæ—¶è¯­ä¹‰éƒ½æ˜¯ç”±ä¸€ç³»åˆ—ç®—æ³•æ­¥éª¤æŒ‡å®šçš„ï¼Œè¿™ä¸ä¼ªä»£ç æ²¡ä»€ä¹ˆä¸åŒï¼Œä½†å½¢å¼è¦ç²¾ç¡®å¾—å¤šã€‚  

<div class=example>

<div algorithm="sample set of algorithm steps">

ä¸€ä¸ªç®—æ³•æ­¥éª¤çš„æ ·æœ¬é›†å¦‚ä¸‹:  

1.  å°† a è®¾ç½®ä¸º 1
1.  å°† b è®¾ç½®ä¸º a+a.  
1.  if b æ˜¯ **2**, then
  1.  å“‡å“¦! ç®—æ³•æ²¡é—®é¢˜.
1.  Else
  1.  å•Šå“¦! å‡ºé—®é¢˜äº†ï¼

</div>

</div>

<p class=note>æŠ½è±¡æ“ä½œ: [=Â§5.2 Algorithm Conventions=]</p>

## Abstract operations ## {#abstract-operations}

æœ‰æ—¶ä½ ä¼šåœ¨è§„èŒƒä¸­çœ‹åˆ°æŸäº›åƒæ˜¯å‡½æ•°è°ƒç”¨çš„ä¸œè¥¿ã€‚æ¯”å¦‚ {{Boolean()}} function is:

<div algorithm="to execute Boolean() (excerpt)">

å½“ <code class=idl>Boolean</code> è¢«å…¥åœº |value| è°ƒç”¨æ—¶, æ‰§è¡Œä»¥ä¸‹æ­¥éª¤:

1.  Let <var ignore>b</var> be ! [$ECMAScript/ToBoolean$](|value|).
1.  ...

</div>

è¿™ä¸ªâ€œToBooleanâ€å‡½æ•°è¢«ç§°ä¸ºä¸€ä¸ª <dfn>abstract operation</dfn>: ä¹‹æ‰€ä»¥ç§°å®ƒä¸ºæŠ½è±¡æ“ä½œï¼Œæ˜¯å› ä¸ºå®ƒå®é™…ä¸Šå¹¶æ²¡æœ‰çœŸæ­£çš„è¿™ä¹ˆä¸ªå‡½æ•°å…¬å¼€æš´éœ²ç»™JavaScriptä»£ç ã€‚å®ƒåªæ˜¯è§„èŒƒç¼–å†™è€…å‘æ˜çš„ä¸€ç§ç¬¦å·ï¼Œåªæ˜¯ä¸ºäº†è®©ä»–ä»¬ä¸ç”¨ä¸€éåˆä¸€éåœ°å†™åŒæ ·çš„ä¸œè¥¿ã€‚

Note: ç°åœ¨ï¼Œä¸è¦æ‹…å¿ƒçœ‹ä¸æ‡‚åœ¨ToBooleanä¹‹å‰çš„!ã€‚æˆ‘ä»¬å°†åé¢è®¨è®º [[#completion-records-and-shorthands]].

<p class=note>Further reading: [=Â§5.2.1 Abstract Operations=]</p>

## ä»€ä¹ˆæ˜¯ \[[This]] ## {#what-is-this}

æœ‰æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ° <dfn lt="double brackets notation">\[[Notation]]</dfn> è¢«ç”¨äºåƒ "Let <var ignore>proto</var> be <var ignore>obj</var>.\[[Prototype]]." æ ¹æ®å…¶ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªç¬¦å·åœ¨æŠ€æœ¯ä¸Šå¯ä»¥è¡¨ç¤ºå‡ ç§ä¸åŒçš„ä¸œè¥¿ï¼Œä¸è¿‡æŠŠå®ƒå½“æˆâ€œæ— æ³•é€šè¿‡JavaScriptä»£ç è§‚å¯Ÿåˆ°çš„å†…éƒ¨å±æ€§â€ä¼šå¾ˆæœ‰åŠ©äºä½ çš„ç†è§£ã€‚  

å‡†ç¡®åœ°è¯´ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä¸‰ç§ä¸åŒçš„ä¸œè¥¿ï¼Œæˆ‘å°†ç”¨è§„èŒƒä¸­çš„ç¤ºä¾‹æ¥è¯´æ˜è¿™ä¸€ç‚¹ã€‚ä¸è¿‡ï¼Œç°åœ¨ä¹Ÿå¯ä»¥æš‚ä¸”è·³è¿‡ã€‚

### Record å­—æ®µ ### {#double-brackets-field-of-record}

ECMAScriptè§„èŒƒä½¿ <dfn>Record</dfn> è¿™ä¸ªæœ¯è¯­æ¥æŒ‡ä»£å…·æœ‰ä¸€ç»„å›ºå®šé”®çš„é”®å€¼æ˜ å°„â€”â€”æœ‰ç‚¹åƒcè¯­è¨€ä¸­çš„ç»“æ„ã€‚ [=Record=] çš„æ¯ä¸ªé”®å€¼å¯¹ç§°ä¸ºä¸€ä¸ª<dfn for=Record>field</dfn>. å› ä¸º [=Records=] åªèƒ½å‡ºç°åœ¨è§„èŒƒä¸­ï¼Œè€Œä¸èƒ½å‡ºç°åœ¨å®é™…çš„JavaScriptä»£ç ä¸­ï¼Œæ‰€ä»¥ä½¿ç”¨  [=double brackets notation|[[Notation]]=] å»å¼•ç”¨ [=fields=] of a [=Record=].

<div class=example>

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ[=Property Descriptors=] å±æ€§æè¿°ç¬¦ä¹Ÿæ˜¯åŸºäº [=Records=] with [=fields=] \[[Value]], \[[Writable]], \[[Get]], \[[Set]], \[[Enumerable]], and \[[Configurable]]. The [$ECMAScript/IsDataDescriptor$] [=abstract operation=] å¹¿æ³›ä½¿ç”¨è¿™ç§è¡¨ç¤ºæ³•ï¼š

<div algorithm="to call the abstract operation IsDataDescriptor">

å½“ä½¿ç”¨ [=Property Descriptor=] è°ƒç”¨æŠ½è±¡æ“ä½œIsDataDescriptor æ—¶ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤:  

1.  If |Desc| is **undefined**, return **false**.
1.  If both |Desc|.\[[Value]] and |Desc|.\[[Writable]] are absent, return **false**.
1.  Return **true**.

</div>

</div>

åœ¨ä¸‹ä¸€èŠ‚ä¸­å¯ä»¥æ‰¾åˆ° [=Records=] çš„å¦ä¸€ä¸ªå…·ä½“ä¾‹å­, [[#completion-records-and-shorthands]].

<p class=note>Further reading: [=Â§6.2.1 The List and Record Specification Types=]</p>

### JavaScript å¯¹è±¡çš„å†…éƒ¨æ§½  ### {#double-brackets-internal-slot-of-javascript-object}

JavaScript å¯¹è±¡å¯èƒ½ä¼šæœ‰ä¸€äº›æ‰€è°“çš„ [=internal slots=] è€Œè§„èŒƒä¼šä½¿ç”¨è¿™äº›æ§½æ¥ä¿å­˜æ•°æ®ã€‚åƒ [=Record/field|Record fields=], these [=internal slots=] æ ·ï¼Œè¿™äº›å†…éƒ¨æ§½ä¸èƒ½ç”¨JavaScriptè§‚å¯Ÿåˆ°ï¼Œä½†å¯èƒ½å…¶ä¸­çš„ä¸€äº›ä¼šé€šè¿‡ç‰¹å®šçš„å·¥å…·ï¼ˆå¦‚è°·æ­ŒChromeçš„DevToolsï¼‰æš´éœ²å‡ºæ¥ã€‚å› æ­¤ï¼Œä½¿ç”¨ [=double brackets notation|[[Notation]]=] è¡¨è¿° [=internal slots=].

[=internal slots=] çš„ç»†èŠ‚å°†åœ¨ [[#javascript-objects]]ä¸­è®¨è®ºã€‚ç°åœ¨ï¼Œä¸è¦å¤ªæ‹…å¿ƒå®ƒä»¬çš„ç”¨é€”ï¼Œå…ˆè¯·æ³¨æ„ä¸‹é¢çš„ç¤ºä¾‹ã€‚  

<div class=example>

å¤§å¤šæ•°JavaScriptå¯¹è±¡éƒ½æœ‰ \[[Prototype]] [=internal slot=]è¿™ä¹ˆä¸€ä¸ªå†…éƒ¨æ§½ï¼Œå®ƒå¼•ç”¨äº†å½“å‰å¯¹è±¡æ‰€ç»§æ‰¿çš„å¯¹è±¡ã€‚è¿™ä¸ªå†…éƒ¨æ§½çš„å€¼é€šå¸¸ä¹Ÿå°±æ˜¯ {{MDN/Object.getPrototypeOf()}} æ–¹æ³•è¿”å›çš„å€¼ã€‚åœ¨ [$ECMAScript/OrdinaryGetPrototypeOf$] [=abstract operation=], è¿™ä¸ªå†…éƒ¨æ§½çš„ [=internal slot=] å€¼ä¼šè¢«è®¿é—®:

<div algorithm="to call the abstract operation OrdinaryGetPrototypeOf">

å½“å¯¹è±¡Oè°ƒç”¨æŠ½è±¡æ“ä½œ OrdinaryGetPrototypeOf æ—¶ï¼Œå°†æ‰§è¡Œä»¥ä¸‹æ­¥éª¤:

1.  Return |O|.\[[Prototype]].

</div>

</div>

Note: å¯¹è±¡çš„ [=Internal slots=] å’Œ [=Record/field|Record fields=] çš„å†…éƒ¨æ§½åœ¨å¤–è§‚ä¸Šæ˜¯ç›¸åŒçš„ï¼Œä½†æ— è®ºå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡è¿˜æ˜¯ä¸€ä¸ª [=Record=]ï¼Œéƒ½å¯ä»¥é€šè¿‡æŸ¥çœ‹è¿™ä¸ªè¡¨ç¤ºæ³•çš„å®ä¾‹ä¸»ä½“(å‡ºç°åœ¨'.'ä¹‹å‰çš„éƒ¨åˆ†)æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚ä»ä¸Šä¸‹æ–‡ç¯å¢ƒæ¥çœ‹é€šå¸¸æ˜¯å¾ˆå®¹æ˜“åŒºåˆ«çš„ã€‚

###  JavaScriptå¯¹è±¡çš„å†…éƒ¨æ–¹æ³• ### {#double-brackets-internal-method-of-javascript-object}

JavaScriptå¯¹è±¡ä¹Ÿæœ‰æ‰€è°“çš„ [=internal methods=]. åƒ [=internal slots=], è¿™äº› [=internal methods=] ä¸èƒ½é€šè¿‡JavaScriptç›´æ¥è§‚å¯Ÿåˆ°ã€‚å› æ­¤ï¼Œä½¿ç”¨ [=double brackets notation|[[Notation]]=] to describe [=internal methods=].

[=internal methods=] çš„ç»†èŠ‚å°†åœ¨ [[#javascript-objects]] è®¨è®º. ç°åœ¨ï¼Œä¸è¦å¤ªæ‹…å¿ƒå®ƒä»¬çš„ç”¨é€”ï¼Œä½†è¯·æ³¨æ„ä¸‹é¢çš„ç¤ºä¾‹ã€‚  

<div class=example>

æ‰€æœ‰JavaScriptå‡½æ•°éƒ½æœ‰ä¸€ä¸ª \[[Call]] å†…éƒ¨æ–¹æ³•æ¥è¿è¡Œè¯¥å‡½æ•°ã€‚è¿™ä¸ª [$ECMAScript/Call$] [=abstract operation=] æœ‰ä»¥ä¸‹æ­¥éª¤:  

> 3.  Return ? |F|.\[[Call]](|V|, |argumentsList|).

è¿™ä¸ª |F| æ˜¯ä¸€ä¸ªJavaScriptå‡½æ•°å¯¹è±¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒFçš„ \[[Call]] å†…éƒ¨æ–¹æ³•ç”¨å‚æ•° |V| å’Œ |argumentsList| è°ƒç”¨è‡ªèº«ã€‚  

</div>

Note: [=double brackets notation|[[Notation]]=] çš„ç¬¬ä¸‰ç§å«ä¹‰ä¸å…¶ä»–å«ä¹‰çš„åŒºåˆ«åœ¨äºï¼Œå®ƒçœ‹èµ·æ¥æ›´åƒä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚

## Completion Records; `?` and `!` ## {#completion-records-and-shorthands}

ECMAScriptè§„èŒƒä¸­çš„æ¯ä¸ªè¿è¡Œæ—¶è¯­ä¹‰éƒ½ä¼šæ˜¾å¼æˆ–éšå¼åœ°è¿”å›ä¸€ä¸ª  <dfn>Completion Record</dfn> ç»“æœã€‚è¿™ä¸ª [=Completion Record=] æ˜¯ä¸€ä¸ª [=Record=] æœ‰ç€ä¸‰ç§å¯èƒ½çš„ [=Record/fields=]:

* a <dfn for="Completion Record">\[[Type]]</dfn> (<dfn enum-value for="Completion Record/[[Type]]">normal</dfn>, <dfn enum-value for="Completion Record/[[Type]]">return</dfn>, <dfn enum-value for="Completion Record/[[Type]]">throw</dfn>, <dfn enum-value for="Completion Record/[[Type]]">break</dfn>, or <dfn enum-value for="Completion Record/[[Type]]">continue</dfn>)
* å¦‚æœ  [=Completion Record/[[Type]]=] æ˜¯ {{Completion Record/[[Type]]/normal}}, {{Completion Record/[[Type]]/return}}, or {{Completion Record/[[Type]]/throw}}, ä¹ˆå®ƒå¯èƒ½è¿˜æœ‰ä¸ªå­—æ®µæ˜¯ <dfn for="Completion Record">\[[Value]]</dfn> ("what's returned/thrown")
* å¦‚æœ [=Completion Record/[[Type]]=] æ˜¯ {{Completion Record/[[Type]]/break}} or {{Completion Record/[[Type]]/continue}},å½“è„šæœ¬æ‰§è¡Œbreakæˆ–continueä½œä¸ºè¿è¡Œæ—¶è¯­ä¹‰çš„ç»“æœæ—¶ï¼Œ å®ƒå¯ä»¥æœ‰é€‰æ‹©åœ°æºå¸¦ä¸€ä¸ª [=MDN/label=] known as <dfn for="Completion Record">\[[Target]]</dfn>

Note: åŒæ‹¬å·ç”¨æ¥è¡¨ç¤º [=Record/fields=] of [=Records=]. See [[#double-brackets-field-of-record]] for a primer on [=Records=] åŠå…¶ç›¸å…³çš„ç¬¦å·ã€‚

ä¸€ä¸ª [=Completion Record/[[Type]]=] æ˜¯ {{Completion Record/[[Type]]/normal}} çš„ [=Completion Record=] è¢«ç§°ä¸º <dfn>normal completion</dfn>. é™¤äº† [=normal completion=] ä¹‹å¤–çš„ [=Completion Record=] éƒ½è¢«ç§°ä¸º <dfn>abrupt completion</dfn>.

å¤§å¤šæ•°æ—¶å€™ï¼Œä½ åªä¼šå¤„ç† [=abrupt completions=] whose [=Completion Record/[[Type]]=] is {{Completion Record/[[Type]]/throw}}. å…¶ä»–ä¸‰ç§abrupt completionåªç”¨äºäº†è§£æŸäº›ç‰¹å®šçš„å¥æ³•å…ƒç´ æ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚å®é™…ä¸Šï¼Œä½ ä¹Ÿä¸ä¼šåœ¨å†…ç½®å‡½æ•°çš„å®šä¹‰ä¸­çœ‹åˆ°ä»–ä»¬ï¼Œå› ä¸ºbreak/continue/returnä¸èƒ½è·¨å‡½æ•°å·¥ä½œã€‚

<p class=note>Further reading: [=Â§6.2.3 The Completion Record Specification Type=]</p>

----

ç”±äº [=Completion Records=] çš„å®šä¹‰ï¼ŒJavaScriptä¸­çš„ä¸€äº›ç»†èŠ‚ï¼Œæ¯”å¦‚åœ¨è§„èŒƒä¸­ä¸å­˜åœ¨ `try`-`catch` å—æ—¶æ‰ä¼šå‡ºç°é”™è¯¯å†’æ³¡ã€‚äº‹å®ä¸Šï¼Œé”™è¯¯(æˆ–è€…æ›´ç²¾ç¡®åœ°è¯´ï¼Œabrupt completions)éƒ½æ˜¯æ˜¾å¼å¤„ç†çš„ã€‚ 

å¦‚æœæ²¡æœ‰ä»»ä½•ç®€å†™çš„è¯ï¼Œä¸€ä¸ªæ™®é€šè°ƒç”¨ [=abstract operation=] æ–‡æœ¬è¯´æ˜å°†ä¼šæ˜¯ä¸‹é¢è¿™æ ·ï¼ˆè¯¥æŠ½è±¡æ“ä½œå¯èƒ½è¿”å›è®¡ç®—ç»“æœï¼Œä¹Ÿå¯èƒ½æŠ›å‡ºé”™è¯¯ï¼‰:

<div class=example>

<div algorithm="to call an abstract operation that may throw without any shorthands">

<strong><em>æ²¡æœ‰ç®€å†™çš„</em></strong>æŠ½è±¡æ“ä½œè°ƒç”¨å¯èƒ½æ˜¯è¿™å‡ ä¸ªæ­¥éª¤:   

1.  Let |resultCompletionRecord| be AbstractOp().

    Note: |resultCompletionRecord| is a [=Completion Record=].

1.  If |resultCompletionRecord| is an abrupt completion, return |resultCompletionRecord|.

    Note: Here, |resultCompletionRecord| å°†è¢«ç›´æ¥è¿”å› [=abrupt completion=]. æ¢å¥è¯è¯´ï¼ŒAbstractOpä¸­æŠ›å‡ºçš„é”™è¯¯å°†è¢«è½¬å‘ï¼Œå‰©ä½™çš„æ­¥éª¤å°†è¢«ä¸­æ­¢ã€‚

1.  Let |result| be |resultCompletionRecord|.\[[Value]].

    Note: ç¡®ä¿æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ª [=normal completion=], æˆ‘ä»¬å¯ä»¥é€šè¿‡å±•å¼€ [=Completion Record=] æ¥è·å¾—æˆ‘ä»¬éœ€è¦çš„å®é™…è®¡ç®—ç»“æœã€‚

1.  |result| å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒåšæ›´å¤šçš„äº‹æƒ…å•¦ã€‚

</div>

è¿™å¯èƒ½ä¼šå”¤é†’ä½ åœ¨Cè¯­è¨€ä¸­çš„æ‰‹åŠ¨é”™è¯¯å¤„ç†çš„è®°å¿†:

```c
int result = abstractOp();              // Step 1
if (result < 0)                         // Step 2
  return result;                        // Step 2 (continued)
                                        // Step 3 is unneeded
// func() succeeded; carrying on...     // Step 4
```

</div>

ä½†æ˜¯ä¸ºäº†å‡å°‘è¿™æ ·ç¬¨é‡è€Œåˆæ ·æ¿åŒ–çš„æ­¥éª¤ï¼ŒECMAScriptè§„èŒƒçš„ç¼–è¾‘è€…æ·»åŠ äº†ä¸€äº›ç®€å†™ã€‚è‡ªES2016ä»¥æ¥ï¼Œç›¸åŒçš„è§„èŒƒæ–‡æœ¬å¯ä»¥ç”¨ä»¥ä¸‹ä¸¤ç§ç­‰ä»·çš„æ–¹å¼æ¥å†™:

<div class=example>

<div algorithm="to call an abstract operation that may throw with ReturnIfAbrupt">

ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ä¼šè°ƒç”¨ä¸€ä¸ªæŠ½è±¡æ“ä½œï¼Œè¯¥æ“ä½œå¯èƒ½ä¼šæŠ›å‡º <strong><em>with [$ReturnIfAbrupt$]</em></strong>:

1.  Let |result| be AbstractOp().

    Note: è¿™é‡Œï¼Œå°±åƒå‰é¢ä¾‹å­ä¸­çš„ç¬¬1æ­¥ä¸€æ ·ï¼Œ|result| æ˜¯ä¸€ä¸ª [=Completion Record=].

1.  [$ECMAScript/ReturnIfAbrupt$](|result|).

    Note: [$ReturnIfAbrupt$] é€šè¿‡è½¬å‘å¤„ç†abrupt completions ï¼Œå¹¶è‡ªåŠ¨å°† |result| å±•å¼€ä¸ºå®ƒçš„ [=Completion Record/[[Value]]=] .

1.  |result| å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç»“æœã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨å®ƒåšæ›´å¤šçš„äº‹æƒ…å•¦ã€‚

</div>

</div>

æˆ–è€…ï¼Œæ›´å‡†ç¡®åœ°è¯´ï¼Œç”¨ç‰¹æ®Šçš„é—®å· <dfn lt="?" id="question-mark">question mark (?)</dfn> ç¬¦å·è¡¨ç¤º:

<div class=example>

<div algorithm="to call an abstract operation that may throw with a ReturnIfAbrupt shorthand">

ä¸€ä¸ªä½¿ç”¨ <strong><em>with a [=?|question mark (?)=]</em></strong>è¡¨è¿°çš„æŠ½è±¡æ“ä½œ:

1.  Let |result| be ? AbstractOp().

    Note: åœ¨è¿™ä¸ªè¡¨ç¤ºæ³•ä¸­ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸å»å¤„ç† [=Completion Records=] ã€‚ The [=?=] ç®€å†™å¯ä»¥å¸®æˆ‘ä»¬å¤„ç†æ‰€æœ‰çš„äº‹æƒ…ï¼Œå¹¶ä¸”è¿™ä¸ª*result*å¯ä»¥ç«‹å³ä½¿ç”¨ã€‚ã€‚

1.  |result| å°±æ˜¯æˆ‘ä»¬æ‰€æƒ³è¦çš„ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨å®ƒåšæ›´å¤šçš„äº‹æƒ…å•¦ã€‚

</div>

</div>

----

å¦‚æœå½“æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªAbstractOpçš„ç‰¹å®šè°ƒç”¨ä¸€å®šä¸ä¼šè¿”ä¸€ä¸ªabrupt completionæ—¶ï¼Œæˆ‘ä»¬è¿˜æƒ³å‘è¯»è€…ä¼ é€’æ›´å¤šçš„å…³äºè§„èŒƒæ„å›¾ä¿¡æ¯çš„è¯ï¼Œé‚£æˆ‘ä»¬å°±ä¼šä½¿ç”¨æ„Ÿå¹<dfn lt="!" id="exclamation-mark">exclamation mark (!)</dfn> è¡¨è¿°:

<div class=example>

<div algorithm="to call an abstract operation that cannot ever throw with a ReturnIfAbrupt shorthand">

é€šè¿‡åŠ ä¸€ä¸ªæ„Ÿå¹å·<strong><em>with an [=!|exclamation mark (!)=]</em></strong>ï¼Œè¯¥æŠ½è±¡æ“ä½œçš„abrupt completionså°†æ°¸è¿œä¸ä¼šè¢«æŠ›å‡ºï¼Œåˆ†ä¸ºä¸‹é¢è¿™å‡ ä¸ªæ­¥:

1.  Let |result| be ! AbstractOp().

    Note:  [=?=] ä¼šè½¬å‘æ‰€æœ‰å¯èƒ½å¾—åˆ°çš„é”™è¯¯, [=!=] åˆ™ä¼šæ–­è¨€æˆ‘ä»¬ä»è¿™ä¸ªè°ƒç”¨ä¸­æ°¸è¿œä¸ä¼šå¾—åˆ°abrupt completionsï¼Œå¦‚æœå¾—åˆ°äº†ï¼Œé‚£å°†æ˜¯è§„èŒƒä¸­ä¸€ä¸ªbugã€‚å’Œ?çš„æƒ…å†µä¸€æ ·ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸ä¼šå»å¤„ç† Completion Records ã€‚å¹¶ä¸” |result| å¯ä»¥ç«‹å³ä½¿ç”¨ã€‚.

1.  |result| å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨å®ƒåšæ›´å¤šçš„äº‹æƒ…å•¦ã€‚

</div>

</div>

<div class=advisement heading=CAUTION>

ä¸å¯å¦è®¤çš„ï¼Œ[=!=] å®ƒçœ‹èµ·æ¥åƒä¸€ä¸ªæœ‰æ•ˆçš„JavaScriptè¡¨è¾¾å¼ï¼Œè¿™ä¸ªå¯èƒ½ä¼šè®©ä»¤äººå›°æƒ‘:

> 1.  Let <var ignore>b</var> be ! [$ECMAScript/ToBoolean$](|value|).
>
> <cite>â€” æ‘˜è‡³ {{Boolean()}}.</cite>

Here, the [=!=] jä»…ä»…æ„å‘³ç€æˆ‘ä»¬ç¡®ä¿¡å¯¹ [$ToBoolean$] çš„è°ƒç”¨æ°¸è¿œä¸ä¼šè¿”å›å¼‚å¸¸ï¼Œè€Œä¸æ˜¯å–ç›¸åçš„ç»“æœ!

</div>

<p class=note>Further reading: [=Â§5.2.3.4 ReturnIfAbrupt Shorthands=].</p>

## JavaScript Objects ## {#javascript-objects}

åœ¨ECMAScriptä¸­ï¼Œä¸€éƒ¨åˆ†åœ¨è®²æ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„<dfn lt="internal method">internal methods</dfn>å†…éƒ¨æ–¹æ³•é›†ï¼Œè€Œè§„èŒƒçš„å…¶ä½™éƒ¨åˆ†å°±æ˜¯åœ¨è®²é€šè¿‡è°ƒç”¨è¿™äº›æ–¹æ³• [=internal methods=]æ¥æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ã€‚æ‰€æœ‰å¯¹è±¡éƒ½æœ‰ä»¥ä¸‹å‡ ä¸ªå†…éƒ¨æ–¹æ³•:

- \[[Get]], è·å–å¯¹è±¡çš„å±æ€§ (e.g. `obj.prop`)
- \[[Set]], è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ (e.g. `obj.prop = 42;`)
- \[[GetPrototypeOf]], è·å–å¯¹è±¡çš„åŸå‹ (i.e., `Object.getPrototypeOf(obj)`)
- \[[GetOwnProperty]], å®ƒè·å–ä¸€ä¸ªå¯¹è±¡è‡ªèº«çš„å±æ€§æè¿°ç¬¦ (i.e., `Object.getOwnPropertyDescriptor(obj, "prop")`)
- \[[Delete]], ç”¨äºåˆ é™¤å¯¹è±¡ä¸Šçš„å±æ€§ (e.g. `delete obj.prop`)

(è¯¦ç»†çš„è¯´æ˜åœ¨ [=Â§6.1.7.2 Object Internal Methods and Internal Slots=]).

æ ¹æ®è¿™ä¸ªå®šä¹‰ï¼Œ<dfn lt="function object">function objects</dfn>(æˆ–è€…è¯´â€œfunctionsâ€)ä¹Ÿåªæ˜¯äº›ç®€å•çš„å¯¹è±¡ï¼Œåªä¸è¿‡è¿™äº›å¯¹è±¡å¦å¤–å…·æœ‰\[[Call]]å†…éƒ¨æ–¹æ³•ï¼Œä¹Ÿå¯èƒ½è¿˜æœ‰\[[Construct]]å†…éƒ¨æ–¹æ³•ã€‚ä¹Ÿå› æ­¤å®ƒä»¬è¢«ç§°ä¸º <dfn lt="callable object">callable objects</dfn>ã€‚

è¯¥è§„èŒƒå°†æ‰€æœ‰å¯¹è±¡åˆ†ä¸ºä¸¤ä¸ªå¤§å—: [=ordinary objects=]ï¼ˆæ™®é€šå¯¹è±¡ï¼‰ and [=exotic objects=]ï¼ˆç‰¹æ®Šå¯¹è±¡ï¼‰ã€‚ä½ é‡åˆ°çš„å¤§å¤šæ•°å¯¹è±¡éƒ½æ˜¯ <dfn lt="ordinary object">ordinary objects</dfn>, è¿™æ„å‘³ç€å®ƒä»¬æ‰€æœ‰ [=internal methods=] éƒ½æ˜¯ [=Â§9.1 Ordinary Object Internal Methods and Internal Slots=]ä¸­è§„å®šçš„é»˜è®¤æ–¹æ³•ã€‚

ç„¶è€Œï¼ŒECMAScriptè§„èŒƒè¿˜å®šä¹‰äº†å‡ ç§ <dfn lt="exotic object">exotic objects</dfn>ï¼Œè¿™äº›å¯¹è±¡å¯èƒ½é‡å†™äº†è¿™äº›å†…éƒ¨æ–¹æ³•çš„é»˜è®¤å®ç°ã€‚å¯¹äºè¿™äº›ç‰¹æ®Šå¯¹è±¡å…è®¸åšä»€ä¹ˆï¼Œè§„èŒƒæ˜¯æœ‰ä¸€äº›æ˜ç¡®çš„æœ€ä½é™åº¦çš„é™åˆ¶çš„ã€‚ç„¶è€Œé€šå¸¸åœ¨ä¸è¿èƒŒè§„èŒƒçš„æƒ…å†µä¸‹ï¼Œé‡å†™å†…éƒ¨æ–¹æ³•å·²ç»å¯ä»¥ç©å‡ºå¾ˆå¤šèŠ±æ ·æ¥äº†ã€‚  

<div class=example>

{{ECMAScript/Array}} å¯¹è±¡å°±æ˜¯ [=exotic objects=]ä¹‹ä¸€ã€‚ Arrayå¯¹è±¡çš„ <code class=idl>length</code> å±æ€§çš„æŸäº›ç‰¹æ®Šè¯­ä¹‰æ˜¯ä¸èƒ½é€šè¿‡æ™®é€šå¯¹è±¡çš„å¯ç”¨æ‰‹æ®µæ¥å®ç°çš„ã€‚

å…¶ä¸­ä¸€ä¸ªå°±æ˜¯ï¼Œé€šè¿‡è®¾ç½®Arrayå¯¹è±¡çš„ <code class=idl>length</code> å±æ€§å°±å¯ä»¥å®ç°ä»è¿™ä¸ª{{ECMAScript/Array}} å¯¹è±¡ä¸­åˆ é™¤å±æ€§çš„åŠŸèƒ½ï¼Œè€Œ <code class=idl>length</code> å±æ€§ä¼¼ä¹åªæ˜¯ä¸€ä¸ªæ™®é€šçš„æ•°æ®å±æ€§ã€‚ç›¸åï¼Œ`new Map().size` åªæ˜¯ä¸€ä¸ªåœ¨ `Map.prototype` ä¸ŠæŒ‡å®šçš„ `getter` å‡½æ•°ï¼Œå¹¶ä¸”ä¸å…·æœ‰åƒ `[].length` é‚£æ ·å…·æœ‰é­”æ³•èˆ¬çš„å±æ€§ã€‚

<pre>
> const arr = [0, 1, 2, 3];
> console.log(arr);
[ 0, 1, 2, 3 ]
> arr.length = 1;
> console.log(arr);
[ 0 ]
> console.log(Object.getOwnPropertyDescriptor([], "length"));
{ value: 1,
  writable: true,
  enumerable: false,
  configurable: false }
</pre>

<pre>
> console.log(Object.getOwnPropertyDescriptor(new Map(), "size"));
undefined
> console.log(Object.getOwnPropertyDescriptor(Map.prototype, "size"));
{ get: [Function: get size],
  set: undefined,
  enumerable: false,
  configurable: true }
</pre>

è¿™ä¸ªè¡Œä¸ºæ˜¯é€šè¿‡é‡å†™ \[[DefineOwnProperty]] å†…éƒ¨æ–¹æ³•æ¥å®ç°çš„ã€‚ See [=Â§9.4.2 Array Exotic Objects=] for details.

</div>

ECMAScriptè§„èŒƒè¿˜å…è®¸å…¶ä»–è§„èŒƒå®šä¹‰å®ƒä»¬è‡ªå·±çš„ç‰¹æ®Šå¯¹è±¡ã€‚æ­£æ˜¯é€šè¿‡è¿™ç§æœºåˆ¶ï¼Œæ‰è§„å®šäº†æµè§ˆå™¨å¯¹ <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy#Cross-origin_script_API_access">cross-origin API access</a>çš„é™åˆ¶(see {{WindowProxy}}) [[HTML]]ã€‚JavaScriptç¨‹åºå‘˜ä¹Ÿå¯ä»¥é€šè¿‡ {{ECMAScript/Proxy}} åˆ›å»ºè‡ªå·±çš„ç‰¹æ®Šå¯¹è±¡ã€‚  

----

JavaScriptå¯¹è±¡ä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰ <dfn lt="internal slot">internal slots</dfn> æ¥åŒ…å«æŸäº›ç‰¹å®šç±»å‹çš„å€¼ã€‚æˆ‘å€¾å‘äºæŠŠ [=internal slots=] ä½œæ˜¯Symbolå‘½åçš„å±æ€§ï¼Œå®ƒä»¬éšè—åœ¨ {{Object.getOwnPropertySymbols()}}. ä¸­ã€‚æ™®é€šå¯¹è±¡å’Œç‰¹æ®Šå¯¹è±¡ ([=ordinary objects=] and [=exotic objects=]  ) éƒ½å…è®¸æ‹¥æœ‰ [=internal slots=].

<div class=note>

åœ¨ [[#double-brackets-internal-slot-of-javascript-object]] ç« ä¸­, æˆ‘æåˆ°äº†å¤§å¤šæ•°å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå«åš \[[Prototype]] çš„ [=internal slot=] ã€‚ (äº‹å®ä¸Šï¼Œæ‰€æœ‰ [=ordinary objects=] ï¼Œç”šè‡³ä¸€äº› [=exotic objects=] åƒ {{ECMAScript/Array}} éƒ½æœ‰å®ƒ.) ä½†æˆ‘åœ¨ä¸Šé¢ä¹Ÿæ›¾ç®€è¦åœ°æè¿°è¿‡æœ‰ä¸€ä¸ªåä¸º \[[GetPrototypeOf]] çš„  [=internal method=] çš„å†…éƒ¨æ–¹æ³•ã€‚å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢?

å…³é”®å­—æ˜¯ *å¤§å¤šæ•°*: åŒºåˆ«åœ¨äºå¤§å¤šæ•°å¯¹è±¡éƒ½æœ‰ \[[Prototype]] å†…éƒ¨æ§½ï¼Œè€Œæ‰€æœ‰å¯¹è±¡æ˜¯éƒ½å®ç°äº† \[[GetPrototypeOf]] è¿™ä¸ªå†…éƒ¨æ–¹æ³•ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ{{ECMAScript/Proxy}} å¯¹è±¡æ²¡æœ‰è‡ªå·±çš„ \[[Prototype]], å®ƒçš„ [$ECMAScript/Proxy/[[GetPrototypeOf]]$] å†…éƒ¨æ–¹æ³•è¦ä¹ˆéµä»äºå·²æ³¨å†Œçš„å¤„ç†ç¨‹åºï¼Œè¦ä¹ˆéµä»äºç›®æ ‡å¯¹è±¡çš„åŸå‹ï¼Œå¹¶ä¸”è¢«å­˜å‚¨åœ¨ {{ECMAScript/Proxy}} å¯¹è±¡çš„\[[ProxyTarget]]ä¸­.

å‡ºäºè¿™ä¸ªåŸå› ï¼Œå½“åœ¨å¤„ç†å¯¹è±¡æ—¶ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯å»å‚è€ƒåˆé€‚çš„ [=internal method=] è€Œä¸æ˜¯ç›´æ¥æŸ¥çœ‹ [=internal slot=].

</div>

----

å¯¹äºå¯¹è±¡ã€ [=internal methods=]å’Œ[=internal slots=]ä¹‹é—´å…³ç³»ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ¢å¦ä¸€ç§æ€ç»´æ–¹å¼ã€‚é‚£å°±æ˜¯ç»å…¸çš„é¢å‘å¯¹è±¡è§†è§’ã€‚â€œå¯¹è±¡â€å°±åƒä¸€ä¸ªæ¥å£ï¼Œè§„å®šäº†å‡ ä¸ªå¿…é¡»å®ç°çš„[=internal methods=]ã€‚æ™®é€šå¯¹è±¡æä¾›äº†å†…éƒ¨æ–¹æ³•çš„é»˜è®¤å®ç°ï¼Œè€Œç‰¹æ®Šå¯¹è±¡åˆ™éƒ¨åˆ†æˆ–å®Œå…¨é‡å†™äº†è¿™äº›å®ç°ã€‚å¦ä¸€æ–¹é¢ï¼Œ[=internal slots=]å°±åƒå¯¹è±¡çš„å®ä¾‹å˜é‡ï¼ˆå³å¯¹è±¡çš„å®ç°ç»†èŠ‚ï¼‰ã€‚

æ‰€æœ‰è¿™äº›å…³ç³»éƒ½å¯ä»¥ç”¨ä¸‹é¢çš„UMLå›¾æ¥æ¦‚æ‹¬(ç‚¹å‡»æ”¾å¤§)

<a href="object-uml.svg"><img src="object-uml.svg" style="max-width: 100%" alt="Boxes denoting concepts and connections between them denoting hierarchy"></a>

## ç¤ºä¾‹: <code class=idl>String.prototype.substring()</code> ## {#example-string-prototype-substring}

ç°åœ¨æˆ‘ä»¬å·²ç»æ¯”è¾ƒç†è§£è§„èŒƒæ˜¯å¦‚ä½•ç»„ç»‡å’Œç¼–å†™çš„äº†ï¼Œé‚£æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥ç»ƒä¹ ä¸€ä¸‹!  

å‡è®¾æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜:

> åœ¨ä¸è¿è¡Œä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸‹é¢çš„ä»£ç ç‰‡æ®µè¿”å›ä»€ä¹ˆ?
>
> ```js
> String.prototype.substring.call(undefined, 2, 4)
> ```

è¿™ä¸ªé—®é¢˜ç›¸å½“æ£˜æ‰‹ã€‚çœ‹èµ·æ¥å¯èƒ½æœ‰ä¸¤ä¸ªä¼¼ä¹åˆç†çš„ç»“æœ:  

1. <code class=idl>String.prototype.substring()</code> å¯èƒ½ä¼šé¦–å…ˆå°†undefinedè½¬æ¢ä¸ºå­—ç¬¦ä¸²â€œundefinedâ€ï¼Œç„¶åå–å‡ºå­—ç¬¦ä¸²ä½ç½®2å’Œ3çš„å­—ç¬¦(i.e., the interval [2, 4))ï¼Œç»“æœä¸º `â€œdeâ€` ã€‚

2. å¦ä¸€ç§å¯èƒ½æ˜¯ï¼Œ<code class=idl>String.prototype.substring()</code> å¯èƒ½ä¼š**æŠ›å‡ºé”™è¯¯**ï¼Œç›´æ¥æ‹’ç»**undefined**ä½œä¸ºè¾“å…¥

ä¸å¹¸çš„æ˜¯ï¼Œå½“**this**å€¼ä¸æ˜¯å­—ç¬¦ä¸²æ—¶ <a method for=MDN lt="String.prototype.substring()">MDN</a> ä¹Ÿæ²¡æœ‰æä¾›å‡ºå…³äºè¯¥å‡½æ•°è¡Œä¸ºçš„ä»»ä½•å¯å‚è€ƒè¯´æ˜ã€‚  

*Spec to the rescue!* åœ¨è§„èŒƒ[[ECMA-262]]çš„å·¦ä¸Šè§’çš„æœç´¢æ¡†ä¸­è¾“å…¥ `substring` åï¼Œæˆ‘ä»¬å°±ä¼šçœ‹åˆ° <a>Â§21.1.3.22 String.prototype.substring ( <var ignore>start</var>, <var ignore>end</var> )</a>, è¿™æ‰æ˜¯è¯¥å‡½æ•°å¦‚ä½•å·¥ä½œçš„æ ‡å‡†è§„èŒƒã€‚

åœ¨é˜…è¯»ç®—æ³•æ­¥éª¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæƒ³æƒ³æˆ‘ä»¬çŸ¥é“äº†ä»€ä¹ˆã€‚å‡è®¾æˆ‘ä»¬å·²ç»åŸºæœ¬äº†è§£äº† `str.substring()` æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå…¶å®å°±æ˜¯è¿”å›äº†ç»™å®šå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ã€‚åœ¨**this**å€¼æ²¡æœ‰å®šä¹‰çš„æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯å¦‚ä½•è¿è¡Œçš„å‘¢ï¼Œè¿™ä¸ªæ˜¯ç°åœ¨ä¸ç¡®å®šçš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¼šä¸“é—¨åœ°å»å¯»æ‰¾ç®—æ³•æ­¥éª¤ä¸­å¤„ç†**this**å€¼çš„æ­¥éª¤ã€‚

å¹¸è¿çš„æ˜¯ï¼Œ {{ECMAScript/String.prototype.substring()}} ç®—æ³•çš„ç¬¬ä¸€æ­¥å°±ä¸“é—¨å¤„ç†äº† **this** å€¼:

> 1.  Let *O* be ? [$ECMAScript/RequireObjectCoercible$](**this** value).

The [=?=] ç®€å†™å¯ä»¥è®©æˆ‘ä»¬å¾—å‡ºç»“è®º:åœ¨æŸäº›æƒ…å†µä¸‹ [$RequireObjectCoercible$] [=abstract operation=] å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™ç”¨ [=!=] ä»¥äº†ã€‚å¦‚æœå®ƒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆå®ƒå°†ä¸æˆ‘ä»¬ä¸Šé¢æçš„ç¬¬äºŒä¸ªå‡è®¾ç›¸å¯¹åº”! å¸¦ç€è¿™ä¸ªæƒ³æ³•ï¼Œæˆ‘ä»¬ç‚¹å¼€è¶…é“¾æ¥ï¼Œæ¥çœ‹çœ‹ [$RequireObjectCoercible$] åˆ°åº•åšäº†ä»€ä¹ˆã€‚

The [$ECMAScript/RequireObjectCoercible$] [=abstract operation=] çœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ªã€‚ä¸å¤§å¤šæ•°æŠ½è±¡æ“ä½œä¸åŒï¼Œå®ƒæ˜¯é€šè¿‡è¡¨è€Œä¸æ˜¯ç®—æ³•æ­¥éª¤æ¥å®šä¹‰çš„::

> <table class="data">
>  <tr>
>   <th>Argument Type</th><th>Result</th>
>  </tr>
>  <tr>
>   <td>Undefined</td><td>Throw a **TypeError** exception.</td>
>  </tr>
>  <tr>
>   <td>...</td><td>...</td>
>  </tr>
> </table>

ä¸ç®¡æ€æ · â€“ åœ¨Undefined (æˆ‘ä»¬ä¼ é€’ç»™substring()çš„**this**å€¼çš„ç±»å‹) å¯¹åº”çš„è¿™ä¸€è¡Œä¸­ï¼Œè§„èŒƒæŒ‡æ˜  [$RequireObjectCoercible$] å°†ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚åˆå› ä¸º `?` ç¬¦å·åœ¨å‡½æ•°å®šä¹‰ä¸­ä½¿ç”¨ï¼Œäºæ˜¯æˆ‘ä»¬å°±çŸ¥é“æŠ›å‡ºçš„å¼‚å¸¸ä¸€å®šä¼šå†’æ³¡åˆ°å‡½æ•°è°ƒç”¨çš„åœ°æ–¹ã€‚OKï¼Œæå®š!

äºæ˜¯è¿™æ ·æˆ‘ä»¬å°±æœ‰äº†ç­”æ¡ˆ: **ç»™å®šçš„ä»£ç ç‰‡æ®µä¼šæŠ›å‡ºä¸€ä¸ªTypeErrorå¼‚å¸¸**ã€‚

<div class=note>

è¯¥è§„èŒƒåªè§„å®šäº†æŠ›å‡ºçš„Errorç±»å‹ï¼Œè€Œå¹¶æ²¡æœ‰åŒ…å«å…·ä½“çš„Error messageã€‚è¿™æ„å‘³ç€å…·ä½“å®ç°å¯ä»¥æœ‰ä¸åŒçš„Error messageï¼Œç”šè‡³å¯èƒ½æ˜¯æœ¬åœ°åŒ–çš„Error messageã€‚

ä¾‹å¦‚ï¼Œåœ¨è°·æ­Œçš„V8 6.4ä¸Š(åŒ…å«åœ¨è°·æ­ŒChrome 64ä¸­)ï¼Œmessageæ˜¯

<pre class=highlight highlight="">
TypeError: String.prototype.substring called on null or undefined
</pre>

åœ¨Mozilla Firefox 57.0 ä¸Šç»™å‡ºäº†æ›´å°‘çš„æœ‰ç”¨ä¿¡æ¯

<pre class=highlight highlight="">
TypeError: can't convert undefined to object
</pre>

è€Œä¸æ­¤åŒæ—¶ï¼ŒChakraCore 1.7.5.0ç‰ˆæœ¬(å¾®è½¯Edgeä¸­çš„JavaScriptå¼•æ“)é‡‡ç”¨äº†V8çš„è·¯çº¿å´æŠ›å‡ºäº†

<pre class=highlight highlight="">
TypeError: String.prototype.substring: 'this' is null or undefined
</pre>

</div>

## Example: Can <code class=idl>Boolean()</code> and <code class=idl>String()</code> ä¼šæŠ›å‡ºå¼‚å¸¸ä¹ˆ? ## {#example-can-boolean-and-string-ever-throw-exceptions}

å½“åœ¨ç¼–å†™ä»»åŠ¡ä¸­é‡è¦ä¸”å…³é”®çš„ä»£ç æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†å¼‚å¸¸å¤„ç†ä¼šæ”¾åœ¨ç¼–ç çš„é¦–è¦ä½ç½®ã€‚æ‰€ä»¥ï¼Œ*â€œæˆ‘ç°åœ¨ç”¨çš„è¿™ä¸ªå†…ç½®å‡½æ•°æ˜¯ä¸æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸å‘¢?â€* è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šè€ƒè™‘ã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡ <code class=idl>Boolean()</code> and <code class=idl>String()</code>. è¿™ä¸¤ä¸ªè¯­è¨€å†…ç½®å‡½æ•°æ¥å°è¯•å›ç­”è¿™æ ·çš„é—®é¢˜ã€‚æˆ‘ä»¬å°†åªå…³æ³¨å¯¹è¿™ä¸¤ä¸ªå‡½æ•°çš„ç›´æ¥è°ƒç”¨ï¼Œè€Œä¸æ˜¯ `new Boolean()` and `new String()` ç§åŒ…è£…å‡½æ•°çš„æƒ…å†µï¼ˆè¿™ç§åŒ…è£…å‡½æ•°æ˜¯JavaScriptä¸­æœ€ä¸å—æ¬¢è¿çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå‡ ä¹ä¹Ÿæ˜¯æ‰€æœ‰JSæŒ‡å—éƒ½ä¸é¼“åŠ±çš„åšæ³•ï¼‰ [[YDKJS]].

åœ¨å¯¼èˆªåˆ°è§„èŒƒä¸­çš„ {{ECMAScript/Boolean()}} éƒ¨åˆ†åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›¸å½“çŸ­çš„ç®—æ³•:

<div algorithm="to execute Boolean()">

When <code class=idl>Boolean</code> is called with argument |value|, the following steps are taken:

1.  Let |b| be ! [$ECMAScript/ToBoolean$](|value|).
1.  If NewTarget is **undefined**, return |b|.
1.  Let |O| be ? [$ECMAScript/OrdinaryCreateFromConstructor$](NewTarget, **"%BooleanPrototype%"**, Â« \[[BooleanData]] Â»).
1.  Set |O|.\[[BooleanData]] to |b|.
1.  Return |O|.

</div>

ç„¶è€Œçœ‹èµ·æ¥å¥½åƒå¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œæ¶‰åŠåˆ°äº†ä¸€äº›å…³äº [$OrdinaryCreateFromConstructor$] çš„å¤æ‚æŠ€å·§ã€‚å¦å¤–ï¼Œæ›´é‡è¦çš„æ˜¯åœ¨ç¬¬3æ­¥ä¸­è¿˜æœ‰ä¸€ä¸ª[=?=]çš„ç®€å†™ï¼Œè¿™è¡¨æ˜è¿™ä¸ªå‡½æ•°åœ¨æŸäº›æƒ…å†µä¸‹è¿˜æœ‰å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚è®©æˆ‘ä»¬æ¥ä»”ç»†çœ‹çœ‹å§ã€‚ 

Step 1 å°† |value| (the function argument) å¼ºåˆ¶è½¬æ¢ä¸ºBooleanå€¼ã€‚æœ‰è¶£çš„æ˜¯ï¼Œè¿™ä¸€æ­¥æ²¡æœ‰ [=?=] or [=!=] sç®€å†™ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªCompletion Recordçš„ç¼©å†™é€šå¸¸æ„å‘³ç€è¦åŠ ä¸€ä¸ª [=!=]. æ‰€ä»¥*æ­¥éª¤ 1*ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚

Step 2 æ£€æŸ¥ [$NewTarget$] is **undefined**. <dfn abstract-op>NewTarget</dfn> ä¸ {{MDN/new.target}} åœ¨è§„èŒƒä¸Šæ˜¯ç­‰ä»·çš„ï¼Œç›®çš„æ˜¯è®©è§„èŒƒèƒ½å¤ŸåŒºåˆ†æ˜¯ `new Boolean()` call (where it is `Boolean`) è¿˜æ˜¯ `Boolean()` çš„è°ƒç”¨ (where it is **undefined**).å› ä¸ºæˆ‘ä»¬ç°åœ¨åªéœ€è¦å…³æ³¨å¯¹ `Boolean()` çš„ç›´æ¥è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“NewTargetçš„å€¼æ€»æ˜¯**undefined**ï¼Œä¸”ç®—æ³•ä¸éœ€è¦ä»»ä½•é¢å¤–çš„å¤„ç†ç›´æ¥è¿”å›*b*ã€‚  

å› ä¸ºä¸éœ€è¦è€ƒè™‘ `new` è°ƒç”¨çš„æƒ…å†µï¼Œæ‰€ä»¥å½“è°ƒç”¨ `Boolean()` æ—¶åªä¼šè®¿é—® `Boolean()` ç®—æ³•ä¸­çš„å‰ä¸¤ä¸ªæ­¥éª¤ï¼Œè€Œè¿™ä¸¤ä¸ªæ­¥éª¤éƒ½ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œæ— è®ºè¾“å…¥æ˜¯ä»€ä¹ˆï¼Œ**Boolean()éƒ½ä¸ä¼šæŠ›å‡ºå¼‚å¸¸**ã€‚  

----

OKï¼Œè®©æˆ‘ä»¬æŠŠæ³¨æ„åŠ›å†è½¬å‘ {{ECMAScript/String()}}:

<div algorithm="to execute String()">

å½“ç”¨ |value| è°ƒç”¨ <code class=idl>String</code> æ—¶:

1.  å¦‚æœè°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶æ²¡æœ‰ä¼ é€’å‚æ•°, é‚£å°±å°† |s| è®¾ä¸º `""`.
1.  Else,
  1.  If NewTarget is **undefined** and [$ECMAScript/Type$](|value|) is Symbol, return [$ECMAScript/SymbolDescriptiveString$](|value|).
  1.  Let |s| be ? [$ECMAScript/ToString$](|value|).
1.  If NewTarget is **undefined**, return |s|.
1.  Return ? [$ECMAScript/StringCreate$](|s|, ? [$ECMAScript/GetPrototypeFromConstructor$](NewTarget, `"%StringPrototype%"`)).

</div>

æ ¹æ®åˆ†æ {{ECMAScript/Boolean()}} å‡½æ•°çš„ç›¸å…³ç»éªŒï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ [$NewTarget$] ä¹Ÿå§‹ç»ˆåº”è¯¥ä¸º**undefined**ï¼Œå› æ­¤æœ€åä¸€æ­¥å¯ä»¥è·³è¿‡ã€‚åŒæ—¶æˆ‘ä»¬è¿˜çŸ¥é“ [$Type$] and [$SymbolDescriptiveString$] ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºéƒ½æ²¡æœ‰ä¸ºå…¶å¤„ç†abrupt completionï¼ˆå‰æ–¹æ²¡æœ‰?æˆ–!ï¼‰ã€‚ç„¶è€Œï¼Œåœ¨è°ƒç”¨[$ToString$] [=abstract operation=]å‰æœ‰ä¸€ä¸ª [=?=] . è®©æˆ‘ä»¬æ¥ä»”ç»†çœ‹çœ‹å§ã€‚

å°±åƒæˆ‘ä»¬æ—©äº›æ—¶å€™çœ‹åˆ°çš„ [$RequireObjectCoercible$], [$ECMAScript/ToString$](|argument|) ä¹Ÿæ˜¯ç”¨ä¸€ä¸ªè¡¨å®šä¹‰çš„:

> <table class="data">
>  <tr>
>   <th>Argument Type</th>
>   <th>Result</th>
>  </tr>
>  <tr>
>   <td>Undefined</td>
>   <td>Return `"undefined"`.</td>
>  </tr>
>  <tr>
>   <td>Null</td>
>   <td>Return `"null"`.</td>
>  </tr>
>  <tr>
>   <td>Boolean</td>
>   <td>
>    If |argument| is **true**, return `"true"`.
>
>    If |argument| is **false**, return `"false"`.
>   </td>
>  </tr>
>  <tr>
>   <td>Number</td>
>   <td>Return [$ECMAScript/NumberToString$](|argument|).</td>
>  </tr>
>  <tr>
>   <td>String</td>
>   <td>Return |argument|.</td>
>  </tr>
>  <tr>
>   <td>Symbol</td>
>   <td>Throw a **TypeError** exception.</td>
>  </tr>
>  <tr>
>   <td>Object</td>
>   <td>
>
>    Apply the following steps:
>
>    1.  Let |primValue| be ? [$ECMAScript/ToPrimitive$](|argument|, hint String).
>    1.  Return ? [$ECMAScript/ToString$](|primValue|).
>
>   </td>
>  </tr>
> </table>

åœ¨ {{ECMAScript/String()}} ä¸­è°ƒç”¨ [$ToString$] æ—¶, |value| å¯ä»¥æ˜¯é™¤Symbol(åœ¨å‰é¢çš„æ­¥éª¤ä¸­å·²ç»è¢«è¿‡æ»¤æ‰äº†)ä»¥å¤–çš„ä»»ä½•å€¼ã€‚ç„¶è€Œï¼Œåœ¨Objectè¿™ä¸€è¡Œä¸­ä»ç„¶è¿˜æ˜¯æœ‰ä¸¤ [=?=] ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªé“¾æ¥æ‰¾åˆ° [$ECMAScript/ToPrimitive$] ä»¥åŠå…¶ä»–çš„ä¸œè¥¿ï¼Œè€Œä¸”äº‹å®ä¸Šï¼Œå¦‚æœ*value*æ˜¯ä¸€ä¸ªObjectçš„è¯ï¼Œå°†ä¼šæœ‰å¾ˆå¤šæŠ›å‡ºé”™è¯¯çš„æœºä¼š::

<div class=example>

<details><summary>å‡ ä¸ª {{ECMAScript/String()}} æŠ›å‡ºå¼‚å¸¸çš„ä¾‹å­</summary>

<pre>
// Spec stack trace:
//   <a abstract-op>OrdinaryGet</a> step 8.
//   <a lt="Â§9.1.8 [[Get]] ( P, Receiver )">Ordinary Object's [[Get]]()</a> step 1.
//   <a abstract-op>GetV</a> step 3.
//   <a abstract-op>GetMethod</a> step 2.
//   <a abstract-op>ToPrimitive</a> step 2.d.

String({
  get [Symbol.toPrimitive]() {
    throw new Error("Breaking JavaScript");
  }
});
</pre>

<pre>
// Spec stack trace:
//   <a abstract-op>GetMethod</a> step 4.
//   <a abstract-op>ToPrimitive</a> step 2.d.

String({
  get [Symbol.toPrimitive]() {
    return "Breaking JavaScript";
  }
});
</pre>

<pre>
// Spec stack trace:
//   <a abstract-op>ToPrimitive</a> step 2.e.i.

String({
  [Symbol.toPrimitive]() {
    throw new Error("Breaking JavaScript");
  }
});
</pre>

<pre>
// Spec stack trace:
//   <a abstract-op>ToPrimitive</a> step 2.e.iii.

String({
  [Symbol.toPrimitive]() {
    return { "breaking": "JavaScript" };
  }
});
</pre>

<pre>
// Spec stack trace:
//   <a abstract-op>OrdinaryToPrimitive</a> step 5.b.i.
//   <a abstract-op>ToPrimitive</a> step 2.g.

String({
  toString() {
    throw new Error("Breaking JavaScript");
  }
});
</pre>

<pre>
// Spec stack trace:
//   <a abstract-op>OrdinaryToPrimitive</a> step 5.b.i.
//   <a abstract-op>ToPrimitive</a> step 2.g.

String({
  valueOf() {
    throw new Error("Breaking JavaScript");
  }
});
</pre>

<pre>
// Spec stack trace:
//   <a abstract-op>OrdinaryToPrimitive</a> step 6.
//   <a abstract-op>ToPrimitive</a> step 2.g.

String(Object.create(null));
</pre>

</details>

</div>

å› æ­¤ï¼Œå¯¹äº {{ECMAScript/String()}}, æˆ‘ä»¬çš„ç»“è®ºæ˜¯ï¼š**å¯¹äºåŸå§‹å€¼å®ƒæ°¸è¿œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½†å¯¹äºObjectåˆ™å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯**ã€‚

## Example: `typeof` operator ## {#example-typeof-operator}

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªåˆ†æäº†APIå‡½æ•°ï¼Œæ˜¯æ—¶å€™è®©æˆ‘ä»¬å°è¯•ä¸€äº›ä¸åŒçš„ä¸œè¥¿äº†ï¼ï¼

Issue(2): To be written.

<h2 class=no-num id=glossary>Glossary</h2>

<h3 class=no-num id=common-abstract-operations>Common abstract operations</h3>

: <dfn abstract-op>ArrayCreate</dfn> (&nbsp;|length| [&nbsp;, |proto|&nbsp;]&nbsp;) ([$ECMAScript/ArrayCreate|spec$])
:: åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º *length* çš„æ•°ç»„å¯¹è±¡ï¼Œå°†protoä½œä¸º \[[Prototype]] [=internal slot=]çš„å€¼ã€‚å¦‚æœæœªæŒ‡å®šprotoï¼Œåˆ™ä½¿ç”¨ [=current realm=] çš„ <a interface>%ArrayPrototype%</a>. Equivalent to <code>new Array(|length|)</code> if the {{Array}} constructor and all of its properties have not been monkeypatched, and |proto| is not specified or <a interface>%ArrayPrototype%</a> in the [=current realm=].

: <dfn abstract-op>Call</dfn> (&nbsp;|F|, |V| [&nbsp;, |argumentsList|&nbsp;]&nbsp;) ([$ECMAScript/Call|spec$])
: <dfn abstract-op>Construct</dfn> (&nbsp;|F| [&nbsp;, |argumentsList| [&nbsp;, <var ignore>newTarget</var>&nbsp;]&nbsp;]&nbsp;) ([$ECMAScript/Construct|spec$])
: <dfn abstract-op>Get</dfn> (&nbsp;|O|, |P|&nbsp;) ([$ECMAScript/Get|spec$])
: <dfn abstract-op>HasProperty</dfn> (&nbsp;|O|, |P|&nbsp;) ([$ECMAScript/HasProperty|spec$])
:: Call the corresponding [=internal method=] on |F| or |O| with the rest of the arguments forwarded. Equivalent to the corresponding method on the {{Reflect}} object.

: <dfn abstract-op>DefinePropertyOrThrow</dfn> (&nbsp;|O|, |P|, <var ignore>desc</var>&nbsp;) ([$ECMAScript/DefinePropertyOrThrow|spec$])
: <dfn abstract-op>DeletePropertyOrThrow</dfn> (&nbsp;|O|, |P|&nbsp;) ([$ECMAScript/DeletePropertyOrThrow|spec$])
:: Call the corresponding [=internal method=] (\[[DefineOwnProperty]] and \[[Delete]], respectively) on |O| with the rest of the arguments forwarded, and throw an exception if the operation failed and the [=internal method=] returned **false**.

: <dfn abstract-op>GetV</dfn> (&nbsp;|V|, |P|&nbsp;) ([$ECMAScript/GetV|spec$])
:: Returns [$Get$](|V|, |P|), with |V| converted to an Object with [$ToObject$] first if necessary. Equivalent to <code>|V|[|P|]</code>.

: <dfn abstract-op>HasOwnProperty</dfn> (&nbsp;|O|, |P|&nbsp;) ([$ECMAScript/HasOwnProperty|spec$])
:: Returns whether |O| has an own property named |P|, by calling |O|.\[[GetOwnProperty]](|P|). Equivalent to <code><a method>Object.prototype.hasOwnProperty</a>.call(|O|, |P|)</code>.

: <dfn abstract-op>Invoke</dfn> (&nbsp;|V|, |P| [&nbsp;, |argumentsList|&nbsp;]&nbsp;) ([$ECMAScript/Invoke|spec$])
:: Call the method named |P| on |V| using |argumentsList|. Equivalent to <code>|V|[|P|](...|argumentsList|)</code>. <span class=note>Unlike in [$Call$], |P| here is a property key.</span>

: <dfn abstract-op>IsArray</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/IsArray|spec$])
:: Returns whether |argument| is an {{Array}} [=exotic object=], or if |argument| is a {{Proxy}} [=exotic object=], whether |argument|'s innermost \[[ProxyTarget]] [=internal slot=] is an {{Array}} [=exotic object=]. Equivalent to <code><a method>Array.isArray</a>(|argument|)</code>.

: <dfn abstract-op>IsCallable</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/IsCallable|spec$])
:: Returns whether |argument| is a [=callable object=], otherwise known as a [=function object=]. Equivalent to <code>typeof |argument| === 'function'</code> (with the exception of {{Document/all|document.all}}, which is an exotic object with several special behaviors; see [=Â§B.3.7 The [[IsHTMLDDA]] Internal Slot=]).

: <dfn abstract-op>IsConstructor</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/IsConstructor|spec$])
:: Returns whether |argument| is a [=function object=] with a \[[Construct]] [=internal method=].

: <dfn abstract-op>ReturnIfAbrupt</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ReturnIfAbrupt|spec$])
:: Check if |argument| is an [=abrupt completion=] (like a thrown exception), and if so return that [=abrupt completion=] (and allows the exception to bubble up). Otherwise if |argument| is a [=normal completion=], unwrap that [=Completion Record=] and set |argument| to |argument|.[=Completion Record/[[Value]]=]</a>.
:: See also: [[#completion-records-and-shorthands]].

: <dfn abstract-op>StringCreate</dfn> (&nbsp;|value|, |prototype|&nbsp;) ([$ECMAScript/StringCreate|spec$])
:: Returns a boxed {{String}} Object corresponding to the String |value|, with the \[[Prototype]] internal slot of the resulting object being |prototype|. Equivalent to <code>new <a method>String</a>(value)</code> if |prototype| is the <a interface>%StringPrototype%</a> of the [=current realm=].

: <dfn abstract-op>ToBoolean</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToBoolean|spec$])
:: Returns |argument| coerced to a Boolean. Equivalent to <code>!!|argument|</code>.

: <dfn abstract-op>ToInteger</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToInteger|spec$])
:: Returns [$ToNumber$](|argument|), then truncated (i.e., rounded to 0) to become an integer. Equivalent to <code><a method>Math.trunc</a>(|argument|)</code>.

: <dfn abstract-op>ToInt8</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToInt8|spec$])
: <dfn abstract-op>ToUint8</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToUint8|spec$])
: <dfn abstract-op>ToInt16</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToInt16|spec$])
: <dfn abstract-op>ToUint16</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToUint16|spec$])
: <dfn abstract-op>ToInt32</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToInt32|spec$])
: <dfn abstract-op>ToUint32</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToUint32|spec$])
:: Returns |argument| converted to an integer of the specified bits and signedness using truncation.

: <dfn abstract-op>ToUint8Clamp</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToUint8Clamp|spec$])
:: Returns |argument| converted to an integer of the range [0, 255] using rounding and clamping.

: <dfn abstract-op>ToNumber</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToNumber|spec$])
:: Returns |argument| coerced to a Number. Equivalent to <code>+|argument|</code>.

: <dfn abstract-op>ToObject</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToObject|spec$])
:: Returns |argument| coerced to an Object, using boxed primitive objects if necessary. Equivalent to <code><a method>Object</a>(|argument|)</code> other than the cases where |argument| is **undefined** or **null**.

: <dfn abstract-op>ToPrimitive</dfn> (&nbsp;|input| [&nbsp;, |PreferredType|&nbsp;]&nbsp;) ([$ECMAScript/ToPrimitive|spec$])
:: Returns |input| coerced to a primitive (i.e., non-Object) value, optionally using the type hint given through |PreferredType|. Exact semantics of this [=abstract operation=] vary depending on the |PreferredType|.

: <dfn abstract-op>ToString</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/ToString|spec$])
:: Returns |argument| coerced to a String. Equivalent to <code>&#96;${|argument|}&#96;</code>.
:: <div class=advisement>Care must be taken to realize that neither <code>String(|argument|)</code> nor <code>|argument| + ''</code> is fully equivalent to [$ToString$]. {{String()}} converts Symbol values to their String descriptions, while [$ToString$] throws an exception on Symbol. The addition operator calls some other functions like <code>|argument|[Symbol.toPrimitive]</code> when attempting to convert the value to a String.</div>

: <dfn abstract-op>Type</dfn> (&nbsp;|argument|&nbsp;) ([$ECMAScript/Type|spec$])
:: Returns the [=type=] of |argument|.

</div>
